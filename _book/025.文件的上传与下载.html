<!DOCTYPE html>
<html>
<head>
    <title>025.文件的上传与下载</title>

    <meta charset="UTF-8"/>

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

    <meta name="HandheldFriendly" content="true"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>

    <link href="./asset/gitbook/style.css" type="text/css" rel="stylesheet"/>
    <link href="./asset/gitbook/istyle.css" type="text/css" rel="stylesheet"/>

    <style type="text/css">
        
            span.md_line{margin-bottom:0.5em; display:block; line-height:1.89}
            .md_line br{ display: none;}
            
    </style>

    <script>
        var flowchat_options = {
            'x': 0, 'y': 0, 'line-width': 1, 'line-length': 50, 'text-margin': 10, 'font-size': 13,
            'font-color': '#3c3c3c', 'line-color': '#666666', 'element-color': '#666666', 'fill': 'transparent',
            'yes-text': 'yes', 'no-text': 'no', 'arrow-end': 'block', 'class': 'flowchart', 'scale': 1,
            'symbols': { 'start': {}, 'end': {}, 'condition': {}, 'inputoutput': {}, 'operation': {}, 'subroutine': {}}
        }
    </script>
    <script type="text/javascript" src="./asset/other/raphael-min.js"></script>
    <script type="text/javascript" src="./asset/other/flowchart.js"></script>
    <script type="text/javascript" src="./asset/other/echarts.min.js"></script>


</head>

<body>





<div data-basepath="/service/gitbook" class="book">
    <div class="book-summary">
        <ul class="summary">
            <li>
                <a href="./index.html">php笔记2018</a>
            </li>
            <li class="divider"></li>
            
                
                
    
    <li data-level="1" class="chapter" data-path="001.第一章 环境配置.html">
        
        
        <a href="./001.第一章 环境配置.html" ><b>1</b> 第一章:环境配置</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="2" class="chapter" data-path="002.开发工具介绍与配置.html">
        
        
        <a href="./002.开发工具介绍与配置.html" ><b>2</b> 开发工具介绍与配置</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="3" class="chapter" data-path="003.PHP基础语法.html">
        
        
        <a href="./003.PHP基础语法.html" ><b>3</b> 03.PHP基础语法</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="4" class="chapter" data-path="004.变量.html">
        
        
        <a href="./004.变量.html" ><b>4</b> 04.变量</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="5" class="chapter" data-path="005.数据类型.html">
        
        
        <a href="./005.数据类型.html" ><b>5</b> 05.数据类型</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="6" class="chapter" data-path="006.数据类型转换.html">
        
        
        <a href="./006.数据类型转换.html" ><b>6</b> 06.数据类型转换</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="7" class="chapter" data-path="007.变量与数据类型常用函数.html">
        
        
        <a href="./007.变量与数据类型常用函数.html" ><b>7</b> 07.变量与数据类型常用函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="8" class="chapter" data-path="008.常量.html">
        
        
        <a href="./008.常量.html" ><b>8</b> 008.常量</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="9" class="chapter" data-path="009.运算符.html">
        
        
        <a href="./009.运算符.html" ><b>9</b> 09.运算符</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="10" class="chapter" data-path="010.条件结构.html">
        
        
        <a href="./010.条件结构.html" ><b>10</b> 10.条件结构</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="11" class="chapter" data-path="011.循环结构及特殊流程.html">
        
        
        <a href="./011.循环结构及特殊流程.html" ><b>11</b> 11.循环结构及特殊流程</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="12" class="chapter" data-path="012.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试.html">
        
        
        <a href="./012.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试.html" ><b>12</b> 12.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="13" class="chapter" data-path="013.数组.html">
        
        
        <a href="./013.数组.html" ><b>13</b> 13.数组</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="14" class="chapter" data-path="014.九大超全局数组.html">
        
        
        <a href="./014.九大超全局数组.html" ><b>14</b> 14.九大超全局数组</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="15" class="chapter" data-path="015.函数.html">
        
        
        <a href="./015.函数.html" ><b>15</b> 15.函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="16" class="chapter" data-path="016.常用函数.html">
        
        
        <a href="./016.常用函数.html" ><b>16</b> 16.常用函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="17" class="chapter" data-path="017.面向对象.html">
        
        
        <a href="./017.面向对象.html" ><b>17</b> 17.面向对象</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="18" class="chapter" data-path="018.Trait.html">
        
        
        <a href="./018.Trait.html" ><b>18</b> 18.Trait</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="19" class="chapter" data-path="019.namespace命名空间.html">
        
        
        <a href="./019.namespace命名空间.html" ><b>19</b> 19.namespace命名空间</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="20" class="chapter" data-path="020.自定义分页类.html">
        
        
        <a href="./020.自定义分页类.html" ><b>20</b> 020.自定义分页类</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="21" class="chapter" data-path="021.PHP操作数据库.html">
        
        
        <a href="./021.PHP操作数据库.html" ><b>21</b> 021.PHP操作数据库</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="22" class="chapter" data-path="022.错误报告级别设置及自定义处理函数.html">
        
        
        <a href="./022.错误报告级别设置及自定义处理函数.html" ><b>22</b> 022.错误报告级别设置及自定义处理函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="23" class="chapter" data-path="023.异常处理类 Exception.html">
        
        
        <a href="./023.异常处理类 Exception.html" ><b>23</b> 23.异常处理类 Exception</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="24" class="chapter" data-path="024.文件系统.html">
        
        
        <a href="./024.文件系统.html" ><b>24</b> 24.文件系统</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="25" class="chapter active" data-path="025.文件的上传与下载.html">
        
        
        <a href="./025.文件的上传与下载.html" ><b>25</b> 025.文件的上传与下载</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="26" class="chapter" data-path="026.GD库的使用-图片处理及验证码.html">
        
        
        <a href="./026.GD库的使用-图片处理及验证码.html" ><b>26</b> 026.GD库的使用-图片处理及验证码</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="27" class="chapter" data-path="027.版本控制-SVN.html">
        
        
        <a href="./027.版本控制-SVN.html" ><b>27</b> 027.版本控制-SVN</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="28" class="chapter" data-path="028.版本控制-GIT.html">
        
        
        <a href="./028.版本控制-GIT.html" ><b>28</b> 028.版本控制-GIT</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="29" class="chapter" data-path="029.日期与时间.html">
        
        
        <a href="./029.日期与时间.html" ><b>29</b> 029.日期与时间</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="30" class="chapter" data-path="030.PHP字符串处理与正则表达式.html">
        
        
        <a href="./030.PHP字符串处理与正则表达式.html" ><b>30</b> 30.PHP字符串处理与正则表达式</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="31" class="chapter" data-path="031.XML操作.html">
        
        
        <a href="./031.XML操作.html" ><b>31</b> 032.XML操作</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="32" class="chapter" data-path="032.邮件与短信发送.html">
        
        
        <a href="./032.邮件与短信发送.html" ><b>32</b> 031.邮件与短信发送</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="33" class="chapter" data-path="033.在线支付.html">
        
        
        <a href="./033.在线支付.html" ><b>33</b> 033.在线支付</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="34" class="chapter" data-path="034.HTML协议.html">
        
        
        <a href="./034.HTML协议.html" ><b>34</b> 033.HTML协议</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="35" class="chapter" data-path="035.会话控制之-Cookei.html">
        
        
        <a href="./035.会话控制之-Cookei.html" ><b>35</b> 034.会话控制之-Cookei</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="36" class="chapter" data-path="036.会话控制之-Session.html">
        
        
        <a href="./036.会话控制之-Session.html" ><b>36</b> 035.会话控制之-Session</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="37" class="chapter" data-path="037.缓存之-Memcache.html">
        
        
        <a href="./037.缓存之-Memcache.html" ><b>37</b> 036.缓存之-Memcache</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="38" class="chapter" data-path="038.redis01-下载安装启动.html">
        
        
        <a href="./038.redis01-下载安装启动.html" ><b>38</b> 041.redis01-下载安装启动</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="39" class="chapter" data-path="038.redis02-对于KEY的操作命令(公共命令).html">
        
        
        <a href="./038.redis02-对于KEY的操作命令(公共命令).html" ><b>39</b> 042.redis-对于KEY的操作命令(公共命令)</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="40" class="chapter" data-path="038.redis03-字符串类型的操作.html">
        
        
        <a href="./038.redis03-字符串类型的操作.html" ><b>40</b> 043.Redis字符串类型的操作</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="41" class="chapter" data-path="038.redis04-link链表结构(列表list).html">
        
        
        <a href="./038.redis04-link链表结构(列表list).html" ><b>41</b> 044.redis-link链表结构(就像自动整理索引值的索引数组. 下标 到 len-1)</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="42" class="chapter" data-path="038.redis05-set无序集合.html">
        
        
        <a href="./038.redis05-set无序集合.html" ><b>42</b> 045.redis-set无序集合</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="43" class="chapter" data-path="039.配置Apache2.4+PHP7.3+多站点.html">
        
        
        <a href="./039.配置Apache2.4+PHP7.3+多站点.html" ><b>43</b> 039.配置Apache2.4+PHP7.3+多站点</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="44" class="chapter" data-path="MySQL笔记/index.html">
        
        
        <a href="#" ><b>44</b> MySQL笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="44.1" class="chapter" data-path="MySQL笔记/01.MySQL的下载与安装.html">
        
        
        <a href="./MySQL笔记/01.MySQL的下载与安装.html" ><b>44.1</b> 01.MySQL的下载与安装配置</a>
        
    </li>

                            
                                
    
    <li data-level="44.2" class="chapter" data-path="MySQL笔记/02.MySQL配置-DOS管理工具登陆与退出.html">
        
        
        <a href="./MySQL笔记/02.MySQL配置-DOS管理工具登陆与退出.html" ><b>44.2</b> 02.MySQL配置-DOS管理工具登陆与退出</a>
        
    </li>

                            
                                
    
    <li data-level="44.3" class="chapter" data-path="MySQL笔记/03.数据库操作-语句规范与常用命令.html">
        
        
        <a href="./MySQL笔记/03.数据库操作-语句规范与常用命令.html" ><b>44.3</b> mysql语句规范与常用命令</a>
        
    </li>

                            
                                
    
    <li data-level="44.4" class="chapter" data-path="MySQL笔记/04.数据表操作.html">
        
        
        <a href="./MySQL笔记/04.数据表操作.html" ><b>44.4</b> 数据表操作</a>
        
    </li>

                            
                                
    
    <li data-level="44.5" class="chapter" data-path="MySQL笔记/05.数据操作-增删改.html">
        
        
        <a href="./MySQL笔记/05.数据操作-增删改.html" ><b>44.5</b> 05.数据操作-增删改</a>
        
    </li>

                            
                                
    
    <li data-level="44.6" class="chapter" data-path="MySQL笔记/06.数据操作 简单查询.html">
        
        
        <a href="./MySQL笔记/06.数据操作 简单查询.html" ><b>44.6</b> 06.数据操作 简单查询</a>
        
    </li>

                            
                                
    
    <li data-level="44.7" class="chapter" data-path="MySQL笔记/07.高级查询-排序 多表联合 聚合与分组 限制条数.html">
        
        
        <a href="./MySQL笔记/07.高级查询-排序 多表联合 聚合与分组 限制条数.html" ><b>44.7</b> 07.高级查询-排序 多表联合 聚合与分组 限制条数</a>
        
    </li>

                            
                                
    
    <li data-level="44.8" class="chapter" data-path="MySQL笔记/08.多表连接查询.html">
        
        
        <a href="./MySQL笔记/08.多表连接查询.html" ><b>44.8</b> 08.多表连接查询</a>
        
    </li>

                            
                                
    
    <li data-level="44.9" class="chapter" data-path="MySQL笔记/09.子查询 ANY ALL [NOT] IN [NOT]EXISTS.html">
        
        
        <a href="./MySQL笔记/09.子查询 ANY ALL [NOT] IN [NOT]EXISTS.html" ><b>44.9</b> 09.子查询 ANY ALL [NOT] IN [NOT]EXISTS</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="45" class="chapter" data-path="ThinkPHP3.1.2笔记/index.html">
        
        
        <a href="#" ><b>45</b> ThinkPHP3.1.2笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="45.1" class="chapter" data-path="ThinkPHP3.1.2笔记/01_ThinkPHP3.1.2介绍及安装.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/01_ThinkPHP3.1.2介绍及安装.html" ><b>45.1</b> ThinkPHP3.1.2介绍及安装</a>
        
    </li>

                            
                                
    
    <li data-level="45.2" class="chapter" data-path="ThinkPHP3.1.2笔记/02_ThinkPHP3.1.2MVC模式和URL访问.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/02_ThinkPHP3.1.2MVC模式和URL访问.html" ><b>45.2</b> ThinkPHP 3.1.2 MVC模式和URL访问</a>
        
    </li>

                            
                                
    
    <li data-level="45.3" class="chapter" data-path="ThinkPHP3.1.2笔记/03_ThinkPHP3.1.2输出和模型使用.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/03_ThinkPHP3.1.2输出和模型使用.html" ><b>45.3</b> ThinkPHP 3.1.2 输出和模型使用</a>
        
    </li>

                            
                                
    
    <li data-level="45.4" class="chapter" data-path="ThinkPHP3.1.2笔记/04_ThinkPHP3.1.2_CURD特性.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/04_ThinkPHP3.1.2_CURD特性.html" ><b>45.4</b> ThinkPHP中CURD特性</a>
        
    </li>

                            
                                
    
    <li data-level="45.5" class="chapter" data-path="ThinkPHP3.1.2笔记/05_ThinkPHP3.1.2_CURD实例.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/05_ThinkPHP3.1.2_CURD实例.html" ><b>45.5</b> ThinkPHP_CURD实例,操作数据</a>
        
    </li>

                            
                                
    
    <li data-level="45.6" class="chapter" data-path="ThinkPHP3.1.2笔记/06_ThinkPHP3.1.2_查询方式的一般使用.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/06_ThinkPHP3.1.2_查询方式的一般使用.html" ><b>45.6</b> 查询方式的一般使用</a>
        
    </li>

                            
                                
    
    <li data-level="45.7" class="chapter" data-path="ThinkPHP3.1.2笔记/07_ThinkPHP3.1.2_查询方式实例.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/07_ThinkPHP3.1.2_查询方式实例.html" ><b>45.7</b> 07_ThinkPHP3.1.2_查询方式实例</a>
        
    </li>

                            
                                
    
    <li data-level="45.8" class="chapter" data-path="ThinkPHP3.1.2笔记/08_ThinkPHP3.2.1_连惯操作.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/08_ThinkPHP3.2.1_连惯操作.html" ><b>45.8</b> 08_ThinkPHP3.1.2_连惯操作</a>
        
    </li>

                            
                                
    
    <li data-level="45.9" class="chapter" data-path="ThinkPHP3.1.2笔记/09_ThinkPHP3.1.2_视图.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/09_ThinkPHP3.1.2_视图.html" ><b>45.9</b> 视图</a>
        
    </li>

                            
                                
    
    <li data-level="45.10" class="chapter" data-path="ThinkPHP3.1.2笔记/10_ThinkPHP3.1.2_视图实例_用户登陆.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/10_ThinkPHP3.1.2_视图实例_用户登陆.html" ><b>45.10</b> 视图实例_用户登陆</a>
        
    </li>

                            
                                
    
    <li data-level="45.11" class="chapter" data-path="ThinkPHP3.1.2笔记/11_ThinkPHP3.1.2_模板变量详解.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/11_ThinkPHP3.1.2_模板变量详解.html" ><b>45.11</b> 模板变量详解</a>
        
    </li>

                            
                                
    
    <li data-level="45.12" class="chapter" data-path="ThinkPHP3.1.2笔记/12_ThinkPHP3.1.2_模板中的语法知识.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/12_ThinkPHP3.1.2_模板中的语法知识.html" ><b>45.12</b> 模板中的语法知识</a>
        
    </li>

                            
                                
    
    <li data-level="45.13" class="chapter" data-path="ThinkPHP3.1.2笔记/13_ThinkPHP3.1.2_模板的使用技巧.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/13_ThinkPHP3.1.2_模板的使用技巧.html" ><b>45.13</b> 模板的使用技巧</a>
        
    </li>

                            
                                
    
    <li data-level="45.14" class="chapter" data-path="ThinkPHP3.1.2笔记/配置项.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/配置项.html" ><b>45.14</b> 配置项</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="46" class="chapter" data-path="bootstrap笔记/index.html">
        
        
        <a href="#" ><b>46</b> bootstrap笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="46.1" class="chapter" data-path="bootstrap笔记/01. Bootstrap 介绍.html">
        
        
        <a href="./bootstrap笔记/01. Bootstrap 介绍.html" ><b>46.1</b> 01. Bootstrap 介绍</a>
        
    </li>

                            
                                
    
    <li data-level="46.2" class="chapter" data-path="bootstrap笔记/02. Bootstrap 排版样式.html">
        
        
        <a href="./bootstrap笔记/02. Bootstrap 排版样式.html" ><b>46.2</b> Bootstrap 排版样式</a>
        
    </li>

                            
                                
    
    <li data-level="46.3" class="chapter" data-path="bootstrap笔记/03. Bootstrap 表格和按钮.html">
        
        
        <a href="./bootstrap笔记/03. Bootstrap 表格和按钮.html" ><b>46.3</b> 03. Bootstrap 表格和按钮</a>
        
    </li>

                            
                                
    
    <li data-level="46.4" class="chapter" data-path="bootstrap笔记/04. Bootstrap 栅格系统.html">
        
        
        <a href="./bootstrap笔记/04. Bootstrap 栅格系统.html" ><b>46.4</b> Bootstrap 栅格系统</a>
        
    </li>

                            
                                
    
    <li data-level="46.5" class="chapter" data-path="bootstrap笔记/05.  Bootstrap 表单和图片.html">
        
        
        <a href="./bootstrap笔记/05.  Bootstrap 表单和图片.html" ><b>46.5</b> 04.  Bootstrap 表单和图片</a>
        
    </li>

                            
                                
    
    <li data-level="46.6" class="chapter" data-path="bootstrap笔记/06. 辅组类和响应式工具.html">
        
        
        <a href="./bootstrap笔记/06. 辅组类和响应式工具.html" ><b>46.6</b> 辅组类和响应式工具</a>
        
    </li>

                            
                                
    
    <li data-level="46.7" class="chapter" data-path="bootstrap笔记/07. 图标菜单按钮组件.html">
        
        
        <a href="./bootstrap笔记/07. 图标菜单按钮组件.html" ><b>46.7</b> 图标菜单按钮组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.8" class="chapter" data-path="bootstrap笔记/08. 输入框和导航组件.html">
        
        
        <a href="./bootstrap笔记/08. 输入框和导航组件.html" ><b>46.8</b> 输入框和导航组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.9" class="chapter" data-path="bootstrap笔记/09. 路径分页标签和徽章组件.html">
        
        
        <a href="./bootstrap笔记/09. 路径分页标签和徽章组件.html" ><b>46.9</b> 路径分页标签和徽章组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.10" class="chapter" data-path="bootstrap笔记/10. 巨幕页头缩略图和警告框组件.html">
        
        
        <a href="./bootstrap笔记/10. 巨幕页头缩略图和警告框组件.html" ><b>46.10</b> 巨幕页头缩略图和警告框组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.11" class="chapter" data-path="bootstrap笔记/11. 进度条媒体对象和Well组件.html">
        
        
        <a href="./bootstrap笔记/11. 进度条媒体对象和Well组件.html" ><b>46.11</b> 进度条媒体对象和Well组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.12" class="chapter" data-path="bootstrap笔记/12. 列表组面板和嵌入组件.html">
        
        
        <a href="./bootstrap笔记/12. 列表组面板和嵌入组件.html" ><b>46.12</b> 列表组面板和嵌入组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.13" class="chapter" data-path="bootstrap笔记/13. 模态框插件.html">
        
        
        <a href="./bootstrap笔记/13. 模态框插件.html" ><b>46.13</b> 模态框插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.14" class="chapter" data-path="bootstrap笔记/14. 下拉菜单和滚动监听插件.html">
        
        
        <a href="./bootstrap笔记/14. 下拉菜单和滚动监听插件.html" ><b>46.14</b> 下拉菜单和滚动监听插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.15" class="chapter" data-path="bootstrap笔记/15. 标签页和工具提示插件.html">
        
        
        <a href="./bootstrap笔记/15. 标签页和工具提示插件.html" ><b>46.15</b> 标签页和工具提示插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.16" class="chapter" data-path="bootstrap笔记/16. 弹出框和警告框插件.html">
        
        
        <a href="./bootstrap笔记/16. 弹出框和警告框插件.html" ><b>46.16</b> 弹出框和警告框插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.17" class="chapter" data-path="bootstrap笔记/17. 按钮和折叠插件.html">
        
        
        <a href="./bootstrap笔记/17. 按钮和折叠插件.html" ><b>46.17</b> 按钮和折叠插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.18" class="chapter" data-path="bootstrap笔记/18. 轮播插件.html">
        
        
        <a href="./bootstrap笔记/18. 轮播插件.html" ><b>46.18</b> 轮播插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.19" class="chapter" data-path="bootstrap笔记/19. 附加导航插件.html">
        
        
        <a href="./bootstrap笔记/19. 附加导航插件.html" ><b>46.19</b> 附加导航插件</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="47" class="chapter" data-path="es6/index.html">
        
        
        <a href="#" ><b>47</b> es6</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="47.1" class="chapter" data-path="es6/01-项目目录创建.html">
        
        
        <a href="./es6/01-项目目录创建.html" ><b>47.1</b> 01-项目目录创建</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="48" class="chapter" data-path="jquery笔记/index.html">
        
        
        <a href="#" ><b>48</b> jquery笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="48.1" class="chapter" data-path="jquery笔记/16.14 jQuery-UI 知问前端--cookie 插件.html">
        
        
        <a href="./jquery笔记/16.14 jQuery-UI 知问前端--cookie 插件.html" ><b>48.1</b> jQuery-UI 知问前端--cookie 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.2" class="chapter" data-path="jquery笔记/01.JQUERY入门.html">
        
        
        <a href="./jquery笔记/01.JQUERY入门.html" ><b>48.2</b> 01.JQUERY入门</a>
        
    </li>

                            
                                
    
    <li data-level="48.3" class="chapter" data-path="jquery笔记/02.jQuery基础核心.html">
        
        
        <a href="./jquery笔记/02.jQuery基础核心.html" ><b>48.3</b> 02.jQuery基础核心</a>
        
    </li>

                            
                                
    
    <li data-level="48.4" class="chapter" data-path="jquery笔记/03.jQuery常规选择器.html">
        
        
        <a href="./jquery笔记/03.jQuery常规选择器.html" ><b>48.4</b> 03.jQuery常规选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.5" class="chapter" data-path="jquery笔记/04.jQuery过滤选择器.html">
        
        
        <a href="./jquery笔记/04.jQuery过滤选择器.html" ><b>48.5</b> 04.jQuery过滤选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.6" class="chapter" data-path="jquery笔记/05.jQuery基础DOM和CSS操作.html">
        
        
        <a href="./jquery笔记/05.jQuery基础DOM和CSS操作.html" ><b>48.6</b> 05. 基础DOM和CSS操作</a>
        
    </li>

                            
                                
    
    <li data-level="48.7" class="chapter" data-path="jquery笔记/06.jQuery DOM节点操作.html">
        
        
        <a href="./jquery笔记/06.jQuery DOM节点操作.html" ><b>48.7</b> 06.jQuery DOM节点操作</a>
        
    </li>

                            
                                
    
    <li data-level="48.8" class="chapter" data-path="jquery笔记/07. jQuery表单选择器.html">
        
        
        <a href="./jquery笔记/07. jQuery表单选择器.html" ><b>48.8</b> 07. jQuery表单选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.9" class="chapter" data-path="jquery笔记/08. jQuery基础事件.html">
        
        
        <a href="./jquery笔记/08. jQuery基础事件.html" ><b>48.9</b> jQuery基础事件</a>
        
    </li>

                            
                                
    
    <li data-level="48.10" class="chapter" data-path="jquery笔记/09. jQuery事件对象.html">
        
        
        <a href="./jquery笔记/09. jQuery事件对象.html" ><b>48.10</b> 09. jQuery事件对象</a>
        
    </li>

                            
                                
    
    <li data-level="48.11" class="chapter" data-path="jquery笔记/10. jQuery高级事件.html">
        
        
        <a href="./jquery笔记/10. jQuery高级事件.html" ><b>48.11</b> 10. jQuery高级事件</a>
        
    </li>

                            
                                
    
    <li data-level="48.12" class="chapter" data-path="jquery笔记/11.jQuery动画效果.html">
        
        
        <a href="./jquery笔记/11.jQuery动画效果.html" ><b>48.12</b> 11.jQuery动画效果</a>
        
    </li>

                            
                                
    
    <li data-level="48.13" class="chapter" data-path="jquery笔记/12.jQuery-Ajax.html">
        
        
        <a href="./jquery笔记/12.jQuery-Ajax.html" ><b>48.13</b> 12.jQuery-Ajax</a>
        
    </li>

                            
                                
    
    <li data-level="48.14" class="chapter" data-path="jquery笔记/13. jQuery-Ajax 进阶.html">
        
        
        <a href="./jquery笔记/13. jQuery-Ajax 进阶.html" ><b>48.14</b> 13. jQuery-Ajax 进阶</a>
        
    </li>

                            
                                
    
    <li data-level="48.15" class="chapter" data-path="jquery笔记/14. jQquery工具函数.html">
        
        
        <a href="./jquery笔记/14. jQquery工具函数.html" ><b>48.15</b> 14. jQquery工具函数</a>
        
    </li>

                            
                                
    
    <li data-level="48.16" class="chapter" data-path="jquery笔记/15. jQuery 插件.html">
        
        
        <a href="./jquery笔记/15. jQuery 插件.html" ><b>48.16</b> 15. jQuery 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.17" class="chapter" data-path="jquery笔记/16. 01  jQuery-UI 知问前端概述 .html">
        
        
        <a href="./jquery笔记/16. 01  jQuery-UI 知问前端概述 .html" ><b>48.17</b> jQuery-UI 概述及下载安装</a>
        
    </li>

                            
                                
    
    <li data-level="48.18" class="chapter" data-path="jquery笔记/16. 02 jQuery-UI 知问前端--创建 header 区.html">
        
        
        <a href="./jquery笔记/16. 02 jQuery-UI 知问前端--创建 header 区.html" ><b>48.18</b> jQuery-UI 知问前端--创建 header 区</a>
        
    </li>

                            
                                
    
    <li data-level="48.19" class="chapter" data-path="jquery笔记/16. 03jQuery-UI 知问前端--对话框UI.html">
        
        
        <a href="./jquery笔记/16. 03jQuery-UI 知问前端--对话框UI.html" ><b>48.19</b> jQuery-UI 知问前端--对话框UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.20" class="chapter" data-path="jquery笔记/16. 04 jQuery-UI 知问前端 - 按钮UI.html">
        
        
        <a href="./jquery笔记/16. 04 jQuery-UI 知问前端 - 按钮UI.html" ><b>48.20</b> jQuery-UI 知问前端 - 按钮UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.21" class="chapter" data-path="jquery笔记/16. 05 jQuery-UI 知问前端--创建注册表单.html">
        
        
        <a href="./jquery笔记/16. 05 jQuery-UI 知问前端--创建注册表单.html" ><b>48.21</b> jQuery-UI 知问前端--创建注册表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.22" class="chapter" data-path="jquery笔记/16. 06 jQuery-UI 知问前端--工具提示 UI.html">
        
        
        <a href="./jquery笔记/16. 06 jQuery-UI 知问前端--工具提示 UI.html" ><b>48.22</b> jQuery-UI 知问前端--工具提示 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.23" class="chapter" data-path="jquery笔记/16. 07 jQuery-UI 知问前端 - 自动补全UI.html">
        
        
        <a href="./jquery笔记/16. 07 jQuery-UI 知问前端 - 自动补全UI.html" ><b>48.23</b> jQuery-UI 知问前端 - 自动补全UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.24" class="chapter" data-path="jquery笔记/16. 08 jQuery-UI 知问前端--邮箱自动补全.html">
        
        
        <a href="./jquery笔记/16. 08 jQuery-UI 知问前端--邮箱自动补全.html" ><b>48.24</b> jQuery-UI 知问前端--邮箱自动补全</a>
        
    </li>

                            
                                
    
    <li data-level="48.25" class="chapter" data-path="jquery笔记/16. 09 jQuery-UI 知问前端--日历UI.html">
        
        
        <a href="./jquery笔记/16. 09 jQuery-UI 知问前端--日历UI.html" ><b>48.25</b> 16. 09 jQuery-UI 知问前端--日历UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.26" class="chapter" data-path="jquery笔记/16. 10 jQuery-UI 知问前端--验证插件.html">
        
        
        <a href="./jquery笔记/16. 10 jQuery-UI 知问前端--验证插件.html" ><b>48.26</b> jQuery-UI 知问前端--验证插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.27" class="chapter" data-path="jquery笔记/16. 11 jQuery-UI 知问前端--验证注册表单.html">
        
        
        <a href="./jquery笔记/16. 11 jQuery-UI 知问前端--验证注册表单.html" ><b>48.27</b> jQuery-UI 知问前端--验证注册表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.28" class="chapter" data-path="jquery笔记/16. 12 jQuery-UI 知问前端--Ajax 表单插件.html">
        
        
        <a href="./jquery笔记/16. 12 jQuery-UI 知问前端--Ajax 表单插件.html" ><b>48.28</b> jQuery-UI 知问前端--Ajax 表单插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.29" class="chapter" data-path="jquery笔记/16. 13 jQuery-UI 知问前端--Ajax 提交表单.html">
        
        
        <a href="./jquery笔记/16. 13 jQuery-UI 知问前端--Ajax 提交表单.html" ><b>48.29</b> jQuery-UI 知问前端--Ajax 提交表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.30" class="chapter" data-path="jquery笔记/16. 14 jQuery-UI 知问前端--cookie 插件.html">
        
        
        <a href="./jquery笔记/16. 14 jQuery-UI 知问前端--cookie 插件.html" ><b>48.30</b> jQuery-UI 知问前端--cookie 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.31" class="chapter" data-path="jquery笔记/16. 15 jQuery-UI 知问前端--Ajax 登录.html">
        
        
        <a href="./jquery笔记/16. 15 jQuery-UI 知问前端--Ajax 登录.html" ><b>48.31</b> jQuery-UI 知问前端--Ajax 登录</a>
        
    </li>

                            
                                
    
    <li data-level="48.32" class="chapter" data-path="jquery笔记/16. 16 jQuery-UI 知问前端--选项卡 UI.html">
        
        
        <a href="./jquery笔记/16. 16 jQuery-UI 知问前端--选项卡 UI.html" ><b>48.32</b> jQuery-UI 知问前端--选项卡 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.33" class="chapter" data-path="jquery笔记/16. 17 jQuery-UI 知问前端--折叠菜单 UI.html">
        
        
        <a href="./jquery笔记/16. 17 jQuery-UI 知问前端--折叠菜单 UI.html" ><b>48.33</b> jQuery-UI 知问前端--折叠菜单 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.34" class="chapter" data-path="jquery笔记/16. 18 jQuery-UI 知问前端--编辑器插件.html">
        
        
        <a href="./jquery笔记/16. 18 jQuery-UI 知问前端--编辑器插件.html" ><b>48.34</b> jQuery-UI 知问前端--编辑器插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.35" class="chapter" data-path="jquery笔记/16. 19 jQuery-UI 知问前端--Ajax 提问.html">
        
        
        <a href="./jquery笔记/16. 19 jQuery-UI 知问前端--Ajax 提问.html" ><b>48.35</b> jQuery-UI 知问前端--Ajax 提问</a>
        
    </li>

                            
                                
    
    <li data-level="48.36" class="chapter" data-path="jquery笔记/16. 20 jQquery-UI 知问前端--Ajax 显示.html">
        
        
        <a href="./jquery笔记/16. 20 jQquery-UI 知问前端--Ajax 显示.html" ><b>48.36</b> jQquery-UI 知问前端--Ajax 显示</a>
        
    </li>

                            
                                
    
    <li data-level="48.37" class="chapter" data-path="jquery笔记/16. 21 jQuery-UI 知问前端--Ajax 提交评论.html">
        
        
        <a href="./jquery笔记/16. 21 jQuery-UI 知问前端--Ajax 提交评论.html" ><b>48.37</b> jQuery-UI 知问前端--Ajax 提交评论</a>
        
    </li>

                            
                                
    
    <li data-level="48.38" class="chapter" data-path="jquery笔记/16. 22 jQuery-UI 知问前端--Ajax 显示评论.html">
        
        
        <a href="./jquery笔记/16. 22 jQuery-UI 知问前端--Ajax 显示评论.html" ><b>48.38</b> jQuery-UI 知问前端--Ajax 显示评论</a>
        
    </li>

                            
                                
    
    <li data-level="48.39" class="chapter" data-path="jquery笔记/16. 23 jQuery-UI 知问前端--Ajax 加载更多.html">
        
        
        <a href="./jquery笔记/16. 23 jQuery-UI 知问前端--Ajax 加载更多.html" ><b>48.39</b> jQuery-UI 知问前端--Ajax 加载更多</a>
        
    </li>

                            
                                
    
    <li data-level="48.40" class="chapter" data-path="jquery笔记/16. 24 jQuery-UI 知问前端--总结及屏蔽低版 IE.html">
        
        
        <a href="./jquery笔记/16. 24 jQuery-UI 知问前端--总结及屏蔽低版 IE.html" ><b>48.40</b> jQuery-UI 知问前端--总结及屏蔽低版 IE</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="49" class="chapter" data-path="thinkphp3.2备课笔记/index.html">
        
        
        <a href="#" ><b>49</b> thinkphp3.2备课笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="49.1" class="chapter" data-path="thinkphp3.2备课笔记/01.ThinkPHP-为什么要使用框架.html">
        
        
        <a href="./thinkphp3.2备课笔记/01.ThinkPHP-为什么要使用框架.html" ><b>49.1</b> 01.ThinkPHP-为什么要使用框架</a>
        
    </li>

                            
                                
    
    <li data-level="49.2" class="chapter" data-path="thinkphp3.2备课笔记/02.ThinkPHP-安装与配置.html">
        
        
        <a href="./thinkphp3.2备课笔记/02.ThinkPHP-安装与配置.html" ><b>49.2</b> 02.ThinkPHP-安装与配置</a>
        
    </li>

                            
                                
    
    <li data-level="49.3" class="chapter" data-path="thinkphp3.2备课笔记/03.ThinkPHP--模块化和URL模式.html">
        
        
        <a href="./thinkphp3.2备课笔记/03.ThinkPHP--模块化和URL模式.html" ><b>49.3</b> 03.ThinkPHP--模块化和URL模式</a>
        
    </li>

                            
                                
    
    <li data-level="49.4" class="chapter" data-path="thinkphp3.2备课笔记/04.ThinkPHP-数据库模型初级.html">
        
        
        <a href="./thinkphp3.2备课笔记/04.ThinkPHP-数据库模型初级.html" ><b>49.4</b> 04.ThinkPHP-数据库模型初级</a>
        
    </li>

                            
                                
    
    <li data-level="49.5" class="chapter" data-path="thinkphp3.2备课笔记/05.ThinkPHP-SQL查询语句.html">
        
        
        <a href="./thinkphp3.2备课笔记/05.ThinkPHP-SQL查询语句.html" ><b>49.5</b> 05.ThinkPHP-SQL查询语句</a>
        
    </li>

                            
                                
    
    <li data-level="49.6" class="chapter" data-path="thinkphp3.2备课笔记/06.ThinkPHP-SQL连惯操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/06.ThinkPHP-SQL连惯操作.html" ><b>49.6</b> ThinkPHP-SQL连惯操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.7" class="chapter" data-path="thinkphp3.2备课笔记/07.ThinkPHP-CURD操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/07.ThinkPHP-CURD操作.html" ><b>49.7</b> 07.ThinkPHP-CURD操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.8" class="chapter" data-path="thinkphp3.2备课笔记/08.ThinkPHP-自动验证.html">
        
        
        <a href="./thinkphp3.2备课笔记/08.ThinkPHP-自动验证.html" ><b>49.8</b> 08.ThinkPHP-自动验证</a>
        
    </li>

                            
                                
    
    <li data-level="49.9" class="chapter" data-path="thinkphp3.2备课笔记/09.ThinkPHP-自动完成.html">
        
        
        <a href="./thinkphp3.2备课笔记/09.ThinkPHP-自动完成.html" ><b>49.9</b> 09.ThinkPHP-自动完成</a>
        
    </li>

                            
                                
    
    <li data-level="49.10" class="chapter" data-path="thinkphp3.2备课笔记/10.ThinkPHP-视图.html">
        
        
        <a href="./thinkphp3.2备课笔记/10.ThinkPHP-视图.html" ><b>49.10</b> 10.ThinkPHP-视图</a>
        
    </li>

                            
                                
    
    <li data-level="49.11" class="chapter" data-path="thinkphp3.2备课笔记/11.ThinkPHP-模板基础.html">
        
        
        <a href="./thinkphp3.2备课笔记/11.ThinkPHP-模板基础.html" ><b>49.11</b> 11.ThinkPHP-模板基础</a>
        
    </li>

                            
                                
    
    <li data-level="49.12" class="chapter" data-path="thinkphp3.2备课笔记/12.ThinkPHP-内置标签.html">
        
        
        <a href="./thinkphp3.2备课笔记/12.ThinkPHP-内置标签.html" ><b>49.12</b> 12.ThinkPHP-内置标签</a>
        
    </li>

                            
                                
    
    <li data-level="49.13" class="chapter" data-path="thinkphp3.2备课笔记/13.ThinkPHP-标签库.html">
        
        
        <a href="./thinkphp3.2备课笔记/13.ThinkPHP-标签库.html" ><b>49.13</b> 13.ThinkPHP-标签库</a>
        
    </li>

                            
                                
    
    <li data-level="49.14" class="chapter" data-path="thinkphp3.2备课笔记/14.ThinkPHP-路由功能.html">
        
        
        <a href="./thinkphp3.2备课笔记/14.ThinkPHP-路由功能.html" ><b>49.14</b> 14.ThinkPHP-路由功能</a>
        
    </li>

                            
                                
    
    <li data-level="49.15" class="chapter" data-path="thinkphp3.2备课笔记/15.Thinkphp-URL操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/15.Thinkphp-URL操作.html" ><b>49.15</b> 15.ThinkPHP-URL操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.16" class="chapter" data-path="thinkphp3.2备课笔记/16.ThinkPHP-控制器.html">
        
        
        <a href="./thinkphp3.2备课笔记/16.ThinkPHP-控制器.html" ><b>49.16</b> 16.ThinkPHP-控制器</a>
        
    </li>

                            
                                
    
    <li data-level="49.17" class="chapter" data-path="thinkphp3.2备课笔记/17.ThinkPHP-session与cookie.html">
        
        
        <a href="./thinkphp3.2备课笔记/17.ThinkPHP-session与cookie.html" ><b>49.17</b> 17.ThinkPHP-session与cookie</a>
        
    </li>

                            
                                
    
    <li data-level="49.18" class="chapter" data-path="thinkphp3.2备课笔记/18.ThinkPHP图像处理.html">
        
        
        <a href="./thinkphp3.2备课笔记/18.ThinkPHP图像处理.html" ><b>49.18</b> 18.ThinkPHP图像处理</a>
        
    </li>

                            
                                
    
    <li data-level="49.19" class="chapter" data-path="thinkphp3.2备课笔记/19.ThinkPHP-验证码.html">
        
        
        <a href="./thinkphp3.2备课笔记/19.ThinkPHP-验证码.html" ><b>49.19</b> 19.ThinkPHP-验证码</a>
        
    </li>

                            
                                
    
    <li data-level="49.20" class="chapter" data-path="thinkphp3.2备课笔记/20.ThinkPHP-文件上传.html">
        
        
        <a href="./thinkphp3.2备课笔记/20.ThinkPHP-文件上传.html" ><b>49.20</b> 20.ThinkPHP-文件上传</a>
        
    </li>

                            
                                
    
    <li data-level="49.21" class="chapter" data-path="thinkphp3.2备课笔记/21.ThinkPHP-多语言.html">
        
        
        <a href="./thinkphp3.2备课笔记/21.ThinkPHP-多语言.html" ><b>49.21</b> 21.ThinkPHP-多语言</a>
        
    </li>

                            
                                
    
    <li data-level="49.22" class="chapter" data-path="thinkphp3.2备课笔记/22.ThinkPHP-auth权限控制.html">
        
        
        <a href="./thinkphp3.2备课笔记/22.ThinkPHP-auth权限控制.html" ><b>49.22</b> 22.ThinkPHP-auth权限控制</a>
        
    </li>

                            
                                
    
    <li data-level="49.23" class="chapter" data-path="thinkphp3.2备课笔记/23.ThinkPHP-关联模型.html">
        
        
        <a href="./thinkphp3.2备课笔记/23.ThinkPHP-关联模型.html" ><b>49.23</b> 23.ThinkPHP-关联模型</a>
        
    </li>

                            
                                
    
    <li data-level="49.24" class="chapter" data-path="thinkphp3.2备课笔记/24.ThinkPHP-视图模型与分页.html">
        
        
        <a href="./thinkphp3.2备课笔记/24.ThinkPHP-视图模型与分页.html" ><b>49.24</b> 24.ThinkPHP-视图模型与分页</a>
        
    </li>

                            
                                
    
    <li data-level="49.25" class="chapter" data-path="thinkphp3.2备课笔记/25.ThinkPHP-缓存处理.html">
        
        
        <a href="./thinkphp3.2备课笔记/25.ThinkPHP-缓存处理.html" ><b>49.25</b> 25.ThinkPHP-缓存处理</a>
        
    </li>

                            
                                
    
    <li data-level="49.26" class="chapter" data-path="thinkphp3.2备课笔记/26.ThinkPHP-调试方法.html">
        
        
        <a href="./thinkphp3.2备课笔记/26.ThinkPHP-调试方法.html" ><b>49.26</b> 26.ThinkPHP-调试方法</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="50" class="chapter" data-path="thinkphp5备课笔记/index.html">
        
        
        <a href="#" ><b>50</b> thinkphp5备课笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="50.1" class="chapter" data-path="thinkphp5备课笔记/01.ThinkPHP5.0-安装与配置.html">
        
        
        <a href="./thinkphp5备课笔记/01.ThinkPHP5.0-安装与配置.html" ><b>50.1</b> 01.ThinkPHP5.0-安装与配置</a>
        
    </li>

                            
                                
    
    <li data-level="50.2" class="chapter" data-path="thinkphp5备课笔记/02.ThinkPHP5.0-模块化与URL访问.html">
        
        
        <a href="./thinkphp5备课笔记/02.ThinkPHP5.0-模块化与URL访问.html" ><b>50.2</b> 0.2ThinkPHP5.0-模块化与URL访问</a>
        
    </li>

                            
                                
    
    <li data-level="50.3" class="chapter" data-path="thinkphp5备课笔记/03.ThinkPHP5.0-URL访问与路由.html">
        
        
        <a href="./thinkphp5备课笔记/03.ThinkPHP5.0-URL访问与路由.html" ><b>50.3</b> 03.ThinkPHP5.0-URL访问与路由</a>
        
    </li>

                            
                                
    
    <li data-level="50.4" class="chapter" data-path="thinkphp5备课笔记/04.ThinkPHP5.0-请求与向应.html">
        
        
        <a href="./thinkphp5备课笔记/04.ThinkPHP5.0-请求与向应.html" ><b>50.4</b> 04.ThinkPHP5.0-请求与向应</a>
        
    </li>

                            
                                
    
    <li data-level="50.5" class="chapter" data-path="thinkphp5备课笔记/05.ThinkPHP5.0-数据库基本操作.html">
        
        
        <a href="./thinkphp5备课笔记/05.ThinkPHP5.0-数据库基本操作.html" ><b>50.5</b> 05.ThinkPHP5.0-数据库基本操作</a>
        
    </li>

                            
                                
    
    <li data-level="50.6" class="chapter" data-path="thinkphp5备课笔记/06.ThinkPHP5.0-数据库操作-增删改.html">
        
        
        <a href="./thinkphp5备课笔记/06.ThinkPHP5.0-数据库操作-增删改.html" ><b>50.6</b> 06.Thinkphp5.0-数据库操作-增删改</a>
        
    </li>

                            
                                
    
    <li data-level="50.7" class="chapter" data-path="thinkphp5备课笔记/07.ThinkPHP5.0-数据库查询.html">
        
        
        <a href="./thinkphp5备课笔记/07.ThinkPHP5.0-数据库查询.html" ><b>50.7</b> ThinkPHP5.0-数据库查询</a>
        
    </li>

                            
                                
    
    <li data-level="50.8" class="chapter" data-path="thinkphp5备课笔记/08.ThinkPHP5.0-模型.html">
        
        
        <a href="./thinkphp5备课笔记/08.ThinkPHP5.0-模型.html" ><b>50.8</b> ThinkPHP5.0-模型</a>
        
    </li>

                            
                                
    
    <li data-level="50.9" class="chapter" data-path="thinkphp5备课笔记/09.ThinkPHP5.0-验证.html">
        
        
        <a href="./thinkphp5备课笔记/09.ThinkPHP5.0-验证.html" ><b>50.9</b> 09.ThinkPHP5.0-验证</a>
        
    </li>

                            
                                
    
    <li data-level="50.10" class="chapter" data-path="thinkphp5备课笔记/10.ThinkPHP5.0-视图和模板.html">
        
        
        <a href="./thinkphp5备课笔记/10.ThinkPHP5.0-视图和模板.html" ><b>50.10</b> 10.ThinkPHP5.0-视图和模板</a>
        
    </li>

                            
                                
    
    <li data-level="50.11" class="chapter" data-path="thinkphp5备课笔记/11.ThinkPHP5.0-模板引擎.html">
        
        
        <a href="./thinkphp5备课笔记/11.ThinkPHP5.0-模板引擎.html" ><b>50.11</b> 11.ThinkPHP5.0-模板引擎</a>
        
    </li>

                            
                                
    
    <li data-level="50.12" class="chapter" data-path="thinkphp5备课笔记/12.ThinkPHP5.0-错误调试与日志.html">
        
        
        <a href="./thinkphp5备课笔记/12.ThinkPHP5.0-错误调试与日志.html" ><b>50.12</b> 12.ThinkPHP5.0-错误调试与日志</a>
        
    </li>

                            
                                
    
    <li data-level="50.13" class="chapter" data-path="thinkphp5备课笔记/13.ThinkPHP5.0-扩展.html">
        
        
        <a href="./thinkphp5备课笔记/13.ThinkPHP5.0-扩展.html" ><b>50.13</b> 13.ThinkPHP5.0-扩展</a>
        
    </li>

                            
                                
    
    <li data-level="50.14" class="chapter" data-path="thinkphp5备课笔记/14.ThinkPHP5.0-session与cookie.html">
        
        
        <a href="./thinkphp5备课笔记/14.ThinkPHP5.0-session与cookie.html" ><b>50.14</b> 14.ThinkPHP5.0-session与cookie</a>
        
    </li>

                            
                                
    
    <li data-level="50.15" class="chapter" data-path="thinkphp5备课笔记/15.ThinkPHP5.0-验证码.html">
        
        
        <a href="./thinkphp5备课笔记/15.ThinkPHP5.0-验证码.html" ><b>50.15</b> 15.ThinkPHP5.0-验证码</a>
        
    </li>

                            
                                
    
    <li data-level="50.16" class="chapter" data-path="thinkphp5备课笔记/16.ThinkPHP5.0-文件上传.html">
        
        
        <a href="./thinkphp5备课笔记/16.ThinkPHP5.0-文件上传.html" ><b>50.16</b> 16.ThinkPHP5.0-文件上传</a>
        
    </li>

                            
                                
    
    <li data-level="50.17" class="chapter" data-path="thinkphp5备课笔记/17.ThinkPHP5.0-图片处理.html">
        
        
        <a href="./thinkphp5备课笔记/17.ThinkPHP5.0-图片处理.html" ><b>50.17</b> 17.ThinkPHP5.0-图片处理</a>
        
    </li>

                            
                                
    
    <li data-level="50.18" class="chapter" data-path="thinkphp5备课笔记/18.ThinkPHP5.0-缓存.html">
        
        
        <a href="./thinkphp5备课笔记/18.ThinkPHP5.0-缓存.html" ><b>50.18</b> 18.ThinkPHP5.0-缓存</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="51" class="chapter" data-path="微信小程序/index.html">
        
        
        <a href="#" ><b>51</b> 微信小程序</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="51.1" class="chapter" data-path="微信小程序/01-微信小程序账号与工具.html">
        
        
        <a href="./微信小程序/01-微信小程序账号与工具.html" ><b>51.1</b> 微信小程序账号与工具</a>
        
    </li>

                            
                                
    
    <li data-level="51.2" class="chapter" data-path="微信小程序/02-微信小程序文件结构.html">
        
        
        <a href="./微信小程序/02-微信小程序文件结构.html" ><b>51.2</b> 微信小程序文件结构</a>
        
    </li>

                            
                                
    
    <li data-level="51.3" class="chapter" data-path="微信小程序/03-微信小程序配置-JSON.html">
        
        
        <a href="./微信小程序/03-微信小程序配置-JSON.html" ><b>51.3</b> 微信小程序配置</a>
        
    </li>

                            
                                
    
    <li data-level="51.4" class="chapter" data-path="微信小程序/04-页面常用标签-WXML.html">
        
        
        <a href="./微信小程序/04-页面常用标签-WXML.html" ><b>51.4</b> 04-页面结构-WXML</a>
        
    </li>

                            
                                
    
    <li data-level="51.5" class="chapter" data-path="微信小程序/05-页面数据与函数-JS.html">
        
        
        <a href="./微信小程序/05-页面数据与函数-JS.html" ><b>51.5</b> 05-页面数据与函数-JS</a>
        
    </li>

                            
                                
    
    <li data-level="51.6" class="chapter" data-path="微信小程序/06-页面样式-WXSS.html">
        
        
        <a href="./微信小程序/06-页面样式-WXSS.html" ><b>51.6</b> 06-页面样式-WXSS</a>
        
    </li>

                            
                                
    
    <li data-level="51.7" class="chapter" data-path="微信小程序/07-页面整体WXML布局.html">
        
        
        <a href="./微信小程序/07-页面整体WXML布局.html" ><b>51.7</b> 07-页面整体WXML布局</a>
        
    </li>

                            
                                
    
    <li data-level="51.8" class="chapter" data-path="微信小程序/08-事件.html">
        
        
        <a href="./微信小程序/08-事件.html" ><b>51.8</b> 事件</a>
        
    </li>

                            
                                
    
    <li data-level="51.9" class="chapter" data-path="微信小程序/09-WXS脚本.html">
        
        
        <a href="./微信小程序/09-WXS脚本.html" ><b>51.9</b> WXS脚本</a>
        
    </li>

                            
                                
    
    <li data-level="51.10" class="chapter" data-path="微信小程序/10-小程序云开发.html">
        
        
        <a href="./微信小程序/10-小程序云开发.html" ><b>51.10</b> 10-小程序云开发</a>
        
    </li>

                            
                                
    
    <li data-level="51.11" class="chapter" data-path="微信小程序/11-小程序云开发-云数据库.html">
        
        
        <a href="./微信小程序/11-小程序云开发-云数据库.html" ><b>51.11</b> 11-小程序云开发-云数据库</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
        </ul>

    </div>

    <div class="book-body">
        <div class="body-inner">

            <div class="book-header" role="navigation">
                <h1>
                    <a href="./index.html" > php笔记2018</a>
                </h1>
            </div>

            <div tabindex="-1" class="page-wrapper">
                <div class="page-inner">
                    <h2 class="post_title"> 025.文件的上传与下载 </h2>
                    <div class="post_body"> <p class="md_block">

<div class="toc"><ul>
<li>
<a href="#toc_0">025.文件的上传与下载</a>
<ul>
<li>
<a href="#toc_1">上传</a>
<ul>
<li>
<a href="#toc_2">HTML上传表单</a>
</li>
<li>
<a href="#toc_3">修改或确认PHP配置文件(php.ini)</a>
</li>
<li>
<a href="#toc_4">接收表单PHP文件</a>
</li>
<li>
<a href="#toc_5">处理上传</a>
<ul>
<li>
<a href="#toc_6">上传错误处理:[error] =&gt; 0</a>
</li>
<li>
<a href="#toc_7">判断大小</a>
</li>
<li>
<a href="#toc_8">上传判断类型:[type] =&gt; image/jpeg</a>
</li>
<li>
<a href="#toc_9">获取文件后缀名</a>
</li>
<li>
<a href="#toc_10">处理或过滤文件类型</a>
</li>
<li>
<a href="#toc_11">上传的文件一定要重命名</a>
</li>
</ul>
</li>
<li>
<a href="#toc_12">多文件上传及处理</a>
</li>
<li>
<a href="#toc_13">上传类的简单实现</a>
</li>
</ul>
</li>
<li>
<a href="#toc_14">下载</a>
<ul>
<li>
<a href="#toc_15">客户端下载</a>
<ul>
<li>
<a href="#toc_16">普通下载</a>
</li>
<li>
<a href="#toc_17">头文件指定下载,提供一种比较好的方法</a>
</li>
</ul>
</li>
<li>
<a href="#toc_18">服务端下载</a>
<ul>
<li>
<a href="#toc_19">系统读取文件函数下载-适用于下载小文件</a>
</li>
<li>
<a href="#toc_20">CURL下载-小文件</a>
</li>
<li>
<a href="#toc_21">CURL增强版-大文件</a>
</li>
<li>
<a href="#toc_22">提供一个CURL采集的代码,可以适用于HTTPS协议</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</p>


<h2 id="toc_1">上传</h2>

<h3 id="toc_2">HTML上传表单</h3>

<ol>
<li>HTML上传表单必面增加:表单必须增加编码方式:enctype=&quot;multipart/form-data&quot;</li>
<li>表单中增加一个隐藏input,写在file表单元素的上面,限制文件大小:<input type="hidden" name="MAX_FILE_SIZE" value="2097152" /></li>
<li>必须是post方式提交.不能用GET.</li>
</ol>
<div class="codehilite code_lang_html  highlight"><pre><span></span><span class="c">&lt;!--  表单必须增加:enctype=&quot;multipart/form-data&quot;   --&gt;</span>
  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;upload.php&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="p">&gt;</span>
<span class="c">&lt;!--</span>
<span class="c">表示文件上传文件限制,防君子,不防小人 2*1024*1024=2097152字节(byte)</span>
<span class="c">虽不是必须的,但建议加上,如果文件过大时会有一个警告.</span>
<span class="c">--&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;MAX_FILE_SIZE&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2097152&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;upfile&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;提交&quot;</span><span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_3">修改或确认PHP配置文件(php.ini)</h3>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nx">file_uploads</span> <span class="o">=</span> <span class="nx">On</span> <span class="p">;</span><span class="c1">//打开文件上传功能</span>
<span class="nx">upload_max_filesize</span> <span class="o">=</span> <span class="mi">2</span><span class="nx">M</span><span class="p">;</span><span class="c1">//最大文件大在小</span>
<span class="nx">post_max_size</span> <span class="o">=</span> <span class="mi">8</span><span class="nx">M</span><span class="p">;</span><span class="c1">//要注意POST接收信息最大值,必须大于upload_max_filesize </span>
<span class="nx">max_file_uploads</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span><span class="c1">//单次最大小传20个文件</span>
<span class="nx">upload_tmp_dir</span> <span class="o">=</span> <span class="p">;</span><span class="c1">//指定上传文件临时目录,不指定用系统临时目录</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_4">接收表单PHP文件</h3>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//测试接收upload.php</span>
<span class="o">&lt;?</span><span class="nx">php</span>
    <span class="k">echo</span> <span class="s1">&#39;&lt;pre&gt;&#39;</span><span class="p">;</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">);</span>
    <span class="k">echo</span> <span class="s1">&#39;&lt;/pre&gt;&#39;</span><span class="p">;</span>
    <span class="cm">/*</span>
<span class="cm">    //输出内容如下:</span>
<span class="cm">    Array</span>
<span class="cm">(</span>
<span class="cm">    [MAX_FILE_SIZE] =&gt; 2097152</span>
<span class="cm">)</span>
<span class="cm">Array</span>
<span class="cm">(</span>
<span class="cm">    [upfile] =&gt; Array //下标就是表单中file的name属性</span>
<span class="cm">        (</span>
<span class="cm">            [name] =&gt; 1451bda01b2a55cd10fa2eba11ed2b7f.jpg</span>
<span class="cm">            [type] =&gt; image/jpeg</span>
<span class="cm">            [tmp_name] =&gt; C:\Users\ADMIN\AppData\Local\Temp\phpDD28.tmp</span>
<span class="cm">            [error] =&gt; 0</span>
<span class="cm">            [size] =&gt; 9851</span>
<span class="cm">        )</span>

<span class="cm">)</span>
<span class="cm">    */</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_5">处理上传</h3>

<h4 id="toc_6">上传错误处理:[error] =&gt; 0</h4>

<p class="md_block">
    <span class="md_line">针对上面数组中[error]的值说明</span>
</p>

<table>
 <thead><tr><th style="text-align:left">错误值</th>
<th style="text-align:left">常量(PHP4.3)</th>
<th style="text-align:left">说明</th>
 </tr>
</thead>
 <tbody><tr><td style="text-align:left">0 </td>
<td style="text-align:left"> UPLOAD_ERR_OK </td>
<td style="text-align:left">没任何错误</td>
</tr>
<tr><td style="text-align:left">1</td>
<td style="text-align:left"> UPLOAD_ERR_INI_SIZE </td>
<td style="text-align:left"> 表示上传文件超出约定:修改upload_max_filesize配置文件.</td>
</tr>
<tr><td style="text-align:left">2 </td>
<td style="text-align:left"> UPLOAD_ERR_FORM_SIZE </td>
<td style="text-align:left"> 表上传文件超出了HTML表单隐藏域属性的MAX_FILE_SIZE元素指定的值.</td>
</tr>
<tr><td style="text-align:left">3 </td>
<td style="text-align:left"> UPLOAD_ERR_PARTIAL </td>
<td style="text-align:left"> 表示文件只被部分上传</td>
</tr>
<tr><td style="text-align:left">4 </td>
<td style="text-align:left"> UPLOAD_ERR_NO_FILE </td>
<td style="text-align:left"> 表示没上传任何文件</td>
</tr>
<tr><td style="text-align:left">6 </td>
<td style="text-align:left"> UPLOAD_ERR_NO_TMP_DIR </td>
<td style="text-align:left"> 表示找到不临时文件夹,PHP4.3.10和5.0.3引进.</td>
</tr>
<tr><td style="text-align:left">7 </td>
<td style="text-align:left"> UPLOAD_ERR_CANT_WRITE </td>
<td style="text-align:left"> 表示文件写入失败.PHP5.1.0引进</td>
</tr>
</tbody> 
</table>
<!--block_code_end--><div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//处理错误</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;upfile&#39;</span><span class="p">][</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span>
    <span class="k">switch</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;upfile&#39;</span><span class="p">][</span><span class="s1">&#39;error&#39;</span><span class="p">]){</span>
        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
            <span class="k">echo</span> <span class="s1">&#39;文件上传过大,&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
            <span class="k">echo</span> <span class="s1">&#39;文件大于上传表单中的MAX_FILE_SIZE的值&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
            <span class="k">echo</span> <span class="s1">&#39;文件部分被上传,&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
            <span class="k">echo</span> <span class="s1">&#39;没上传任何文件,&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k">echo</span> <span class="s1">&#39;文件上传出错,原因未知,&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">&#39;既然上传文件出错,程序就中止算了&lt;br /&gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>   
<span class="c1">//处理上传</span>
<span class="nv">$temp_filename</span> <span class="o">=</span> <span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;upfile&#39;</span><span class="p">][</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">];</span><span class="c1">//临时文件</span>
<span class="nv">$src_filename</span> <span class="o">=</span> <span class="s1">&#39;./uploads/&#39;</span><span class="o">.</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;upfile&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">];</span><span class="c1">//目标文件名</span>
<span class="c1">//只需要把临时文件复制到指定目录下指定文件名就可以了</span>
<span class="k">if</span><span class="p">(</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$temp_filename</span><span class="p">,</span> <span class="nv">$src_filename</span><span class="p">)){</span>
    <span class="k">echo</span> <span class="s1">&#39;上传成功!&#39;</span><span class="p">;</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="k">echo</span> <span class="s1">&#39;上传失败!&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_7">判断大小</h4>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//判断大小</span>
<span class="nv">$maxsize</span> <span class="o">=</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="p">;</span><span class="c1">//1mb</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">&#39;upfile&#39;</span><span class="p">][</span><span class="nx">size</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$maxsize</span><span class="p">){</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">&#39;上传的文件过大,程序退出&lt;br /&gt;&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_8">上传判断类型:[type] =&gt; image/jpeg</h4>

<p class="md_block">
    <span class="md_line">所有文件类型在apache配置目录中:mime.types,如我电脑[D:\phpStudy\Apache\conf\mime.types]</span>
</p>


<h4 id="toc_9">获取文件后缀名</h4>

<p class="md_block">
    <span class="md_line">1、pathinfo（路径,参数）<br /></span>
    <span class="md_line">参数非必须，填之后可以返回特定部分，否则返回信息数组（见法2）。<br /></span>
    <span class="md_line">2、explode（分隔符，字符串）<br /></span>
    <span class="md_line">用分隔符分割字符串，返回被分割的部分，以数组形式。<br /></span>
    <span class="md_line">3、substr（字符串，开始位置，长度）<br /></span>
    <span class="md_line">切割字符串，长度非必须，不填的话，就从开始位置到字符串结尾<br /></span>
    <span class="md_line">4、strrchr（字符串，索引标志）<br /></span>
    <span class="md_line">在字符串里找索引标志，返回之后的字符串<br /></span>
    <span class="md_line">5、strrpos（字符串，索引标志）<br /></span>
    <span class="md_line">在字符串里找索引标志，返回其位置</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//方法1</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span><span class="nx">PATHINFO_EXTENSION</span> <span class="p">));</span>
<span class="c1">//方法2</span>
<span class="nv">$info1</span><span class="o">=</span><span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$info1</span><span class="p">[</span><span class="s1">&#39;extension&#39;</span><span class="p">];</span>
<span class="c1">//方法3</span>
<span class="nv">$info2</span><span class="o">=</span><span class="nb">explode</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="nv">$url</span><span class="p">);</span>
<span class="k">echo</span> <span class="nb">end</span><span class="p">(</span><span class="nv">$info2</span><span class="p">);</span>
<span class="c1">//方法4</span>
<span class="nv">$info3</span><span class="o">=</span><span class="nb">substr</span><span class="p">(</span><span class="nb">strrchr</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$info3</span><span class="p">;</span>
<span class="c1">//方法5</span>
<span class="nv">$info4</span><span class="o">=</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="nb">strrpos</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$info4</span><span class="p">;</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_10">处理或过滤文件类型</h4>

<p class="md_block">
    <span class="md_line">//判断上传类型<br /></span>
    <span class="md_line">$alluptype = [&#39;gif&#39;,&#39;png&#39;,&#39;jpg&#39;,&#39;jpeg&#39;];//允许上传的类型<br /></span>
    <span class="md_line">$arr = explode(&#39;.&#39;, basename($_FILES[&#39;upfile&#39;][&#39;name&#39;]));//似呼basename是多余的.<br /></span>
    <span class="md_line">$file_type = array_pop($arr);//弹出最后一个元素并获得它.<br /></span>
    <span class="md_line">if(!in_array($file_type, $alluptype)){<br /></span>
    <span class="md_line">    die(&#39;上传的文件不被允许,程序退出<br />&#39;);<br /></span>
    <span class="md_line">}</span>
</p>


<h4 id="toc_11">上传的文件一定要重命名</h4>

<p class="md_block">
    <span class="md_line">1.分目录,文件太多了查找慢,2.重命名防黑客防覆盖<br /></span>
    <span class="md_line">$src_filename = &#39;./uploads/&#39;.date(&#39;YmdHis&#39;).rand(10000,99999).$file_type;//目标文件名,上传专用目录/年月日时分秒/随要5位.后缀名,如果文件名太长可以转成16进制.</span>
</p>


<h3 id="toc_12">多文件上传及处理</h3>

<p class="md_block">
    <span class="md_line">两种表单方式上传多个文件<br /></span>
    <span class="md_line">1.写多个file表单域,name值可以用upload[]作为数组上传<br /></span>
    <span class="md_line">2.写一个或多个表单域 ,增加multiple=&quot;multiple&quot;,且name=&quot;files[]&quot;的表单域</span>
</p>

<div class="codehilite code_lang_html  highlight"><pre><span></span>    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;uploadfile.class.php&quot;</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;MAX_FILE_SIZE&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2097152&quot;</span> <span class="p">/&gt;</span>
        用户名: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;username&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;username&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        密码: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        文件上传:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">multiple</span><span class="o">=</span><span class="s">&quot;multiple&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;uface[]&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        文件上传:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;upload&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="p">/&gt;&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;提交&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>

<!--block_code_end-->
<p class="md_block">
    <span class="md_line">用一个循环来处理多个表单域上传的文件</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span>    <span class="k">foreach</span><span class="p">(</span><span class="nv">$_FILES</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">){</span>
        <span class="c1">//1.判断错误</span>
        <span class="nv">$error</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$error</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
            <span class="c1">//这段代码是可选的....</span>
            <span class="k">switch</span><span class="p">(</span><span class="nv">$error</span><span class="p">){</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="k">echo</span> <span class="s1">&#39;文件过大&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="k">echo</span> <span class="s1">&#39;文件大于HTML表单设置大小&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="k">echo</span> <span class="s1">&#39;文件部分被上传&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="k">echo</span> <span class="s1">&#39;没有上传文件&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="k">echo</span> <span class="s1">&#39;文件上传出错,原因未知&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;,程序退出!&lt;br /&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//2.判断大小</span>
        <span class="nv">$max_size</span> <span class="o">=</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span><span class="c1">//限制上传为2M大小  1byte * 1024 = 1kb;1kb*1024=1mb</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$max_size</span><span class="p">){</span>
            <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;当前文件过大!&lt;br /&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//3.获取文件后缀名.</span>
        <span class="nv">$ext</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span>
        <span class="c1">//4.判断文件类型</span>
        <span class="nv">$file_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span><span class="s1">&#39;jpe&#39;</span><span class="p">,</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span><span class="s1">&#39;png&#39;</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$ext</span><span class="p">,</span> <span class="nv">$file_types</span><span class="p">)){</span>
            <span class="k">exit</span><span class="p">(</span><span class="s1">&#39;文件上传的类型不被允许!&lt;br /&gt;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//5.重命名文件:(时间戳+随机数+判断是否存在.)</span>
        <span class="k">do</span><span class="p">{</span>
            <span class="nv">$time</span> <span class="o">=</span> <span class="nb">dechex</span><span class="p">(</span><span class="nb">time</span><span class="p">());</span>
            <span class="nv">$rand</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">999</span><span class="p">);</span>
            <span class="nv">$new_name</span> <span class="o">=</span> <span class="nv">$time</span> <span class="o">.</span> <span class="nv">$rand</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> <span class="o">.</span><span class="nv">$ext</span><span class="p">;</span>
        <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="s1">&#39;uploads/&#39;</span><span class="o">.</span><span class="nv">$new_name</span><span class="p">));</span>
        
        <span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">]</span> <span class="p">,</span><span class="s1">&#39;uploads/&#39;</span><span class="o">.</span><span class="nv">$new_name</span><span class="p">);</span>
        <span class="k">echo</span> <span class="s1">&#39;文件上传成功!&lt;img src=&quot;uploads/&#39;</span> <span class="o">.</span> <span class="nv">$new_name</span> <span class="o">.</span> <span class="s1">&#39;&quot; /&gt;&lt;hr /&gt;&#39;</span><span class="p">;</span>    
    <span class="p">}</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_13">上传类的简单实现</h3>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="k">class</span> <span class="nc">UploadFile</span><span class="p">{</span>
    <span class="c1">//下面四个需要设置</span>
    <span class="k">private</span> <span class="nv">$max_size</span> <span class="o">=</span> <span class="mi">1048576</span><span class="p">;</span><span class="c1">//默认为1MB </span>
    <span class="k">private</span> <span class="nv">$types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;jpg&#39;</span><span class="p">];</span><span class="c1">//过滤类型</span>
    <span class="k">private</span> <span class="nv">$re_name</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span><span class="c1">//上传重命名</span>
    <span class="k">private</span> <span class="nv">$up_dir</span> <span class="o">=</span> <span class="s1">&#39;./uploads&#39;</span><span class="p">;</span><span class="c1">//上传的目录.</span>
    <span class="c1">//下面2个用私有,但需要获取</span>
    <span class="k">private</span> <span class="nv">$message</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span><span class="c1">//每次上传的信息(包括错误,成功)</span>
    <span class="k">private</span> <span class="nv">$success_files</span> <span class="o">=</span> <span class="p">[];</span><span class="c1">//如果上传成功,就能获取上传文件的列表.</span>

    
    <span class="sd">/**</span>
<span class="sd">     * 获取当前消息(包括上传成功或失败)</span>
<span class="sd">     * @return string 当前的消息字符串!</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">get_message</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="sd">/**</span>
<span class="sd">     * 获取上传后文件的列表,请在上传后获取.</span>
<span class="sd">     * @return array 当前上传的文件列表,</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">get_files</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">success_files</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="sd">/**</span>
<span class="sd">     * 设置当前对象的参数(max_size:限制文件最大,types:允许上传的类型数组,re_name:是否重命名,默认重命名,up_dir:上传目录)</span>
<span class="sd">     * @param $key string 设置的键</span>
<span class="sd">     * @param $val 设置的值</span>
<span class="sd">     * @return boolean 成功返回TRUE,失败返回FALSE.</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">set</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$val</span><span class="p">){</span>
        <span class="c1">//isset($this-&gt;$key)</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nb">get_class_vars</span><span class="p">(</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">)))</span> <span class="o">&amp;&amp;</span> <span class="nv">$key</span> <span class="o">!=</span> <span class="s1">&#39;message&#39;</span> <span class="o">&amp;&amp;</span> <span class="nv">$key</span> <span class="o">!=</span> <span class="s1">&#39;success_files&#39;</span><span class="p">){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$key</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;设置的参数不存在!&#39;</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    
    
    <span class="c1">//上传前要做几件事件1.判断错误,2.判断大小,3.获取扩展名,4.过滤类型 5.重命名</span>
    <span class="k">function</span> <span class="nf">upload</span><span class="p">(){</span>
        <span class="c1">//如果上传的目录不存在,则创建</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">up_dir</span><span class="p">)){</span>
            <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">up_dir</span><span class="p">,</span><span class="mo">0777</span><span class="p">,</span><span class="k">TRUE</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//如果$_FILES数组是空的,根本没文件上传而来</span>
        <span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">)){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;根本没有文件上传!&#39;</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="c1">//进行数组格式处理:只要有一个文件出错,全部不上传====================================</span>
        <span class="nv">$temp_arr</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$_FILES</span> <span class="k">as</span> <span class="nv">$file</span><span class="p">){</span>
            <span class="c1">//$count = count($file[&#39;name&#39;]);</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])){</span>
                <span class="nv">$temp</span> <span class="o">=</span> <span class="p">[];</span>
                <span class="nv">$count</span> <span class="o">=</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]);</span>
                <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$count</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                    <span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="nv">$i</span><span class="p">];</span><span class="c1">//获取每个文件名</span>
                    <span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">][</span><span class="nv">$i</span><span class="p">],</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span><span class="c1">//$file[&#39;type&#39;][$i];</span>
                    <span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">][</span><span class="nv">$i</span><span class="p">];</span>
                    <span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">][</span><span class="nv">$i</span><span class="p">];</span>
                    <span class="c1">//获取是否有错</span>
                    <span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_error</span><span class="p">(</span><span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">])){</span>
                         <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">][</span><span class="nv">$i</span><span class="p">];</span>
                    <span class="c1">//判断大小</span>
                    <span class="k">if</span><span class="p">(</span><span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">max_size</span><span class="p">){</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;上传的文件超过了对象限制的大小,上传失败!&#39;</span><span class="p">;</span>
                        <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="c1">//过滤类型</span>
                    <span class="nv">$ext</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$temp</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span>
                    <span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">types</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$ext</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">types</span><span class="p">)){</span>
                        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件上传的类型不被允许!上传失败!&#39;</span><span class="p">;</span>
                        <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                    <span class="p">}</span>
                    <span class="nv">$temp_arr</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$temp</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="c1">//获取是否有错</span>
                <span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_error</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">])){</span>
                    <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//判断大小</span>
                <span class="k">if</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">max_size</span><span class="p">){</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;上传的文件超过了对象限制的大小,上传失败!&#39;</span><span class="p">;</span>
                    <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//过滤类型</span>
                <span class="nv">$ext</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">types</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$ext</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">types</span><span class="p">)){</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件上传的类型不被允许!上传失败!&#39;</span><span class="p">;</span>
                    <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">//获取扩展名</span>
                <span class="nv">$temp_arr</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$file</span><span class="p">;</span>
                <span class="nv">$temp_arr</span><span class="p">[</span><span class="nb">count</span><span class="p">(</span><span class="nv">$temp_arr</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$file</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="c1">//判断大小 OR 过滤类型 OR 获取是否有错 的代码建议并在这里-------------------</span>
        <span class="p">}</span>
        <span class="c1">//5.重命名文件:(时间戳+随机数+判断是否存在.)</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$temp_arr</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">re_name</span><span class="p">){</span>
                <span class="k">do</span><span class="p">{</span>
                    <span class="nv">$time</span> <span class="o">=</span> <span class="nb">dechex</span><span class="p">(</span><span class="nb">time</span><span class="p">());</span>
                    <span class="nv">$rand</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">999</span><span class="p">);</span>
                    <span class="nv">$new_name</span> <span class="o">=</span> <span class="nv">$time</span> <span class="o">.</span> <span class="nv">$rand</span> <span class="o">.</span> <span class="s1">&#39;.&#39;</span> <span class="o">.</span> <span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">];</span>
                <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">up_dir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span><span class="nv">$new_name</span><span class="p">));</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="nv">$new_name</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">];</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">move_uploaded_file</span><span class="p">(</span><span class="nv">$v</span><span class="p">[</span><span class="s1">&#39;tmp_name&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">up_dir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$new_name</span><span class="p">)){</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">success_files</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">up_dir</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$new_name</span><span class="p">;</span>
            <span class="p">}</span>
            
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;上传成功!&#39;</span><span class="p">;</span>
        
        <span class="cm">/*print_r($temp_arr);</span>
<span class="cm">        echo &#39;&lt;hr /&gt;&#39;;</span>
<span class="cm">        echo $this-&gt;message;*/</span>
        <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="sd">/**</span>
<span class="sd">     * 获取上传文件是否有错</span>
<span class="sd">     * @param $error $_FILES中的错误编码.</span>
<span class="sd">     * @return TRUE OR FALSE表示是否有错.</span>
<span class="sd">     */</span>
    <span class="k">private</span> <span class="k">function</span> <span class="nf">get_error</span><span class="p">(</span><span class="nv">$error</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$error</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>
            <span class="c1">//这段代码是可选的....</span>
            <span class="k">switch</span><span class="p">(</span><span class="nv">$error</span><span class="p">){</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件过大&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件大于HTML表单设置大小&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件部分被上传&#39;</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;没有上传文件&#39;</span><span class="p">;</span><span class="c1">//....................</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">=</span> <span class="s1">&#39;文件上传出错,原因未知&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">message</span> <span class="o">.=</span> <span class="s1">&#39;,上传失败!&#39;</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//调用实例==========================================================</span>
<span class="nv">$upload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UploadFile</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;types&#39;</span><span class="p">,[</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span><span class="s1">&#39;jpe&#39;</span><span class="p">,</span><span class="s1">&#39;zip&#39;</span><span class="p">]))</span> <span class="k">echo</span> <span class="s1">&#39;设置成功!&lt;br /&gt;&#39;</span><span class="p">;</span>
<span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;up_dir&#39;</span><span class="p">,</span><span class="s1">&#39;./uploads/temp&#39;</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">upload</span><span class="p">()){</span>
    <span class="k">echo</span> <span class="s1">&#39;上传成功&#39;</span><span class="p">;</span>
    <span class="c1">//print_r($upload-&gt;success_files);</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$upload</span><span class="o">-&gt;</span><span class="na">get_files</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$v</span><span class="p">){</span>
        <span class="k">echo</span> <span class="s1">&#39;&lt;img src=&quot;&#39;</span><span class="o">.</span><span class="nv">$v</span><span class="o">.</span><span class="s1">&#39;&quot; /&gt;&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="c1">//echo  $upload-&gt;message;</span>
<span class="p">}</span>
</pre></div>

<!--block_code_end-->
<h2 id="toc_14">下载</h2>

<h3 id="toc_15">客户端下载</h3>

<h4 id="toc_16">普通下载</h4>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//普通下载</span>
<span class="c1">//echo &#39;&lt;a href=&quot;xxxx.rar&quot;&gt;点击下载&lt;/a&gt;&#39;;</span>
<span class="c1">//但JPG,HTML等文件浏览器认识,它就不好办了</span>
<span class="c1">//浏览器默认是认识的打开,不认识的当附件打开</span>
<span class="c1">//告诉浏览器是附件,不需要解析就行了,写HTTP头</span>
<span class="c1">//新建一PHP文件</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_17">头文件指定下载,提供一种比较好的方法</h4>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nv">$file</span> <span class="o">=</span> <span class="s2">&quot;./files/001.html&quot;</span><span class="p">;</span>  <span class="c1">//计算机上的一个文件</span>
<span class="c1">//$fileName = basename($file);//获取文件名</span>

<span class="c1">//header(&quot;Content-Type:application/octet-stream&quot;);//告诉浏览器文档类型(mime类型); octet-stream指的是二进制文件类型;下载任何类型的文件都可以这么指定</span>
<span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Content-Disposition:attachment;filename=&quot;</span><span class="o">.</span><span class="nv">$fileName</span><span class="p">);</span><span class="c1">//告诉浏览器以附件方式对待文件(即下载文件);并设置下载后的文件名</span>
<span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Accept-ranges:bytes&quot;</span><span class="p">);</span><span class="c1">//告诉浏览器文件大小的单位</span>
<span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Accept-Length:&quot;</span><span class="o">.</span><span class="nb">filesize</span><span class="p">(</span><span class="nv">$file</span><span class="p">));</span><span class="c1">//告诉浏览器文件的大小</span>
<span class="c1">//$h = fopen($file, &#39;r&#39;);//打开文件</span>
<span class="c1">//echo fread($h, filesize($file));//读取文件并输出文件（即下载文件）</span>
<span class="nb">readfile</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span><span class="c1">//将文件内容全部输出</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_18">服务端下载</h3>

<h4 id="toc_19">系统读取文件函数下载-适用于下载小文件</h4>

<p class="md_block md_has_block_below md_has_block_below_blockquote">
    <span class="md_line">使用file_get_contents和fopen必须空间开启allow_url_fopen。方法：编辑php.ini，设置 allow_url_fopen = On，allow_url_fopen关闭时fopen和file_get_contents都不能打开远程文件。</span>
</p>


<blockquote>

<p class="md_block">
    <span class="md_line">注意: 能用fopen()去下载远程文件,但要注意配置项:allow_url_fopen = On,否则无法使用.</span>
</p>

</blockquote>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nv">$filename</span> <span class="o">=</span> <span class="s1">&#39;http://w3.153.lvruan.com/uploadfile/2018/cpuz.rar&#39;</span><span class="p">;</span>
<span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">);</span><span class="c1">//打开</span>
<span class="nv">$fp01</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;./files/&#39;</span><span class="o">.</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$filename</span><span class="p">),</span><span class="s1">&#39;a+&#39;</span><span class="p">);</span><span class="c1">//打开,如果不存在则创建.如果用a或a+打开,记得先清除里面内容或先删除此文件</span>
<span class="c1">//$str = &#39;&#39;;//装载读取的内容</span>
<span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="nb">feof</span><span class="p">(</span><span class="nv">$fp</span><span class="p">)){</span><span class="c1">//读取</span>
    <span class="c1">//$str .= fread($fp, 1024);</span>
    <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp01</span><span class="p">,</span> <span class="nb">fread</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="mi">1024</span><span class="p">));</span><span class="c1">//写入</span>
<span class="p">}</span>
<span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span><span class="c1">//关闭</span>
<span class="c1">//===========================================================================</span>


<span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp01</span><span class="p">);</span><span class="c1">//关闭</span>
<span class="k">echo</span> <span class="s1">&#39;下载完成!&#39;</span><span class="p">;</span>

<span class="cm">/*$str = file_get_contents($filename);</span>
<span class="cm">file_put_contents(&#39;./files/cpuz.rar&#39;, $str);*/</span>

<span class="cm">/*</span>
<span class="cm"> * 文件读写流程-----回顾</span>
<span class="cm"> * 读取文件:</span>
<span class="cm"> * 1.打开文件</span>
<span class="cm"> * 2.读取内容</span>
<span class="cm"> * 3.关闭文件.</span>
<span class="cm"> * </span>
<span class="cm"> * 写入文件</span>
<span class="cm"> * 1.打开文件</span>
<span class="cm"> * 2.写入文件内容</span>
<span class="cm"> * 3.关闭文件</span>
<span class="cm"> * </span>
<span class="cm"> * </span>
<span class="cm"> */</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_20">CURL下载-小文件</h4>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nv">$url</span> <span class="o">=</span> <span class="nx">“http</span><span class="o">://</span><span class="nx">www</span><span class="o">.</span><span class="nx">baidu</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">”</span><span class="p">;</span>  
<span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>  <span class="c1">//初始化CURL</span>
<span class="nv">$timeout</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>  <span class="c1">//设置下载的URL</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>  <span class="c1">//设置参数,结果是保存到字符串还是输出到显示屏</span>
<span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_CONNECTTIMEOUT</span><span class="p">,</span> <span class="nv">$timeout</span><span class="p">);</span>  <span class="c1">//设置能数:超时时间</span>
<span class="c1">//在需要用户检测的网页里需要增加下面两行  </span>
<span class="c1">//curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);  </span>
<span class="c1">//curl_setopt($ch, CURLOPT_USERPWD, US_NAME.”:”.US_PWD);  </span>
<span class="nv">$contents</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>  
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>  
<span class="k">echo</span> <span class="nv">$contents</span><span class="p">;</span>  
</pre></div>

<!--block_code_end-->
<p class="md_block">
    <span class="md_line">也可以用传对象方式传参数</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nx">也可以用对象方式传参数</span>
<span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span> 
<span class="nv">$opt</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
     <span class="nx">CURLOPT_URL</span> <span class="o">=&gt;</span> <span class="s1">&#39;http://www.maiziedu.com&#39;</span><span class="p">,</span>
     <span class="nx">CURLOPT_HEADER</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
     <span class="nx">CURLOPT_RETURNTRANSFER</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
     <span class="nx">CURLOPT_USERAGENT</span> <span class="o">=&gt;</span> <span class="s1">&#39;spider&#39;</span><span class="p">,</span><span class="c1">//注意可能会引起问题</span>
     <span class="nx">CURLOPT_CONNECTTIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">120</span><span class="p">,</span>
     <span class="nx">CURLOPT_TIMEOUT</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">);</span>
<span class="nb">curl_setopt_array</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nv">$opt</span><span class="p">);</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span> <span class="c1">// 运行cURL，请求网页</span>
<span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span> <span class="c1">// 关闭URL请求</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_21">CURL增强版-大文件</h4>

<p class="md_block">
    <span class="md_line">第1，2种方案存在一个问题，就是在写入本地磁盘之前，文件会被读入内存中，那么当文件很大的时候，可能会超出内存而崩溃<br /></span>
    <span class="md_line">即使你的内存设置的足够的大，那这也是不别要的开销<br /></span>
    <span class="md_line">解决方法是：直接给CURL一个可写的文件流来让它自己来解决这个问题（通过 CURLOPT_FILE选项），这样就要先创建一个文件指针给它。</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span>  <span class="c1">//an example xls file form baidu wenku</span>
  <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;http://bs.baidu.com/wenku4/%2Fe43e6732eba84a316af36c5c67a7c6d6?sign=MBOT:y1jXjmMD4FchJHFHIGN4z:lfZAx1Nrf44aCyD6tJqJ2FhosLY%3D&amp;time=1392893977&amp;response-content-disposition=attachment;%20filename=%22php%BA%AF%CA%FD.xls%22&amp;response-content-type=application%2foctet-stream&#39;</span><span class="p">;</span>
  <span class="nv">$fp_output</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;./test.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">);</span>
  <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
  <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_FILE</span><span class="p">,</span> <span class="nv">$fp_output</span><span class="p">);</span>
  <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
  <span class="nb">exec</span><span class="p">(</span><span class="s2">&quot;libreoffice ./test.xls&quot;</span><span class="p">,</span> <span class="nv">$out</span><span class="p">,</span> <span class="nv">$status</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h4 id="toc_22">提供一个CURL采集的代码,可以适用于HTTPS协议</h4>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//下面函数可以采集HTTPS协议,也可以跟踪跳转,取的是最后一个跳转地址,如作其他用途,请修改后使用.</span>
<span class="k">function</span> <span class="nf">curl_get_last_url</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$curl</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="c1">// 不取回数据</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_NOBODY</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span><span class="c1">//不获取主体内容</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span><span class="c1">//获取头内容</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span><span class="c1">//这是你想用PHP取回的URL地址</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_TIMEOUT</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span><span class="c1">//延时处理:秒数</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span> <span class="c1">// https请求 不验证证书和hosts</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">);</span><span class="c1">//获取的信息以文件流的形式返回，而不是直接输出</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLOPT_FOLLOWLOCATION</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">);</span><span class="c1">//如果返回重定向页面,则跟踪重定向</span>
    <span class="c1">// 发送请求</span>
    <span class="nv">$result</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
    <span class="c1">// 如果请求没有发送失败</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 再检查http响应码是否为200</span>
        <span class="c1">//echo $result;</span>
        <span class="nv">$statusCode</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span><span class="c1">//返回状态码</span>
        <span class="nv">$last_url</span> <span class="o">=</span>  <span class="nb">trim</span><span class="p">(</span><span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$curl</span><span class="p">,</span><span class="nx">CURLINFO_EFFECTIVE_URL</span><span class="p">),</span><span class="s1">&#39; /&#39;</span><span class="p">);</span><span class="c1">//获取最后一次URL,就是重定向后的URL</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nv">$last_url</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$curl</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$last_url</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">curl_get_last_url</span><span class="p">(</span><span class="s1">&#39;https://www.baidu.com&#39;</span><span class="p">);</span>
</pre></div>

<!--block_code_end--> </div>
                </div>
            </div>

        </div>

    </div>

</div>


<script type="text/javascript" src="./asset/gitbook/app.js"></script>

<script>require(["gitbook"], function (gitbook) {
    var config = {"fontSettings": {"theme": null, "family": "sans", "size": 2}};
    gitbook.start(config);
});

</script>





</body>

</html>