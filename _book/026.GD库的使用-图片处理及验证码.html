<!DOCTYPE html>
<html>
<head>
    <title>026.GD库的使用-图片处理及验证码</title>

    <meta charset="UTF-8"/>

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>

    <meta name="HandheldFriendly" content="true"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>

    <link href="./asset/gitbook/style.css" type="text/css" rel="stylesheet"/>
    <link href="./asset/gitbook/istyle.css" type="text/css" rel="stylesheet"/>

    <style type="text/css">
        
            span.md_line{margin-bottom:0.5em; display:block; line-height:1.89}
            .md_line br{ display: none;}
            
    </style>

    <script>
        var flowchat_options = {
            'x': 0, 'y': 0, 'line-width': 1, 'line-length': 50, 'text-margin': 10, 'font-size': 13,
            'font-color': '#3c3c3c', 'line-color': '#666666', 'element-color': '#666666', 'fill': 'transparent',
            'yes-text': 'yes', 'no-text': 'no', 'arrow-end': 'block', 'class': 'flowchart', 'scale': 1,
            'symbols': { 'start': {}, 'end': {}, 'condition': {}, 'inputoutput': {}, 'operation': {}, 'subroutine': {}}
        }
    </script>
    <script type="text/javascript" src="./asset/other/raphael-min.js"></script>
    <script type="text/javascript" src="./asset/other/flowchart.js"></script>
    <script type="text/javascript" src="./asset/other/echarts.min.js"></script>


</head>

<body>





<div data-basepath="/service/gitbook" class="book">
    <div class="book-summary">
        <ul class="summary">
            <li>
                <a href="./index.html">php笔记2018</a>
            </li>
            <li class="divider"></li>
            
                
                
    
    <li data-level="1" class="chapter" data-path="001.第一章 环境配置.html">
        
        
        <a href="./001.第一章 环境配置.html" ><b>1</b> 第一章:环境配置</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="2" class="chapter" data-path="002.开发工具介绍与配置.html">
        
        
        <a href="./002.开发工具介绍与配置.html" ><b>2</b> 开发工具介绍与配置</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="3" class="chapter" data-path="003.PHP基础语法.html">
        
        
        <a href="./003.PHP基础语法.html" ><b>3</b> 03.PHP基础语法</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="4" class="chapter" data-path="004.变量.html">
        
        
        <a href="./004.变量.html" ><b>4</b> 04.变量</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="5" class="chapter" data-path="005.数据类型.html">
        
        
        <a href="./005.数据类型.html" ><b>5</b> 05.数据类型</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="6" class="chapter" data-path="006.数据类型转换.html">
        
        
        <a href="./006.数据类型转换.html" ><b>6</b> 06.数据类型转换</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="7" class="chapter" data-path="007.变量与数据类型常用函数.html">
        
        
        <a href="./007.变量与数据类型常用函数.html" ><b>7</b> 07.变量与数据类型常用函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="8" class="chapter" data-path="008.常量.html">
        
        
        <a href="./008.常量.html" ><b>8</b> 008.常量</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="9" class="chapter" data-path="009.运算符.html">
        
        
        <a href="./009.运算符.html" ><b>9</b> 09.运算符</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="10" class="chapter" data-path="010.条件结构.html">
        
        
        <a href="./010.条件结构.html" ><b>10</b> 10.条件结构</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="11" class="chapter" data-path="011.循环结构及特殊流程.html">
        
        
        <a href="./011.循环结构及特殊流程.html" ><b>11</b> 11.循环结构及特殊流程</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="12" class="chapter" data-path="012.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试.html">
        
        
        <a href="./012.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试.html" ><b>12</b> 12.开启PHP的XDebug或zend_debugger配合Hbuilder进行断点调试</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="13" class="chapter" data-path="013.数组.html">
        
        
        <a href="./013.数组.html" ><b>13</b> 13.数组</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="14" class="chapter" data-path="014.九大超全局数组.html">
        
        
        <a href="./014.九大超全局数组.html" ><b>14</b> 14.九大超全局数组</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="15" class="chapter" data-path="015.函数.html">
        
        
        <a href="./015.函数.html" ><b>15</b> 15.函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="16" class="chapter" data-path="016.常用函数.html">
        
        
        <a href="./016.常用函数.html" ><b>16</b> 16.常用函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="17" class="chapter" data-path="017.面向对象.html">
        
        
        <a href="./017.面向对象.html" ><b>17</b> 17.面向对象</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="18" class="chapter" data-path="018.Trait.html">
        
        
        <a href="./018.Trait.html" ><b>18</b> 18.Trait</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="19" class="chapter" data-path="019.namespace命名空间.html">
        
        
        <a href="./019.namespace命名空间.html" ><b>19</b> 19.namespace命名空间</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="20" class="chapter" data-path="020.自定义分页类.html">
        
        
        <a href="./020.自定义分页类.html" ><b>20</b> 020.自定义分页类</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="21" class="chapter" data-path="021.PHP操作数据库.html">
        
        
        <a href="./021.PHP操作数据库.html" ><b>21</b> 021.PHP操作数据库</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="22" class="chapter" data-path="022.错误报告级别设置及自定义处理函数.html">
        
        
        <a href="./022.错误报告级别设置及自定义处理函数.html" ><b>22</b> 022.错误报告级别设置及自定义处理函数</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="23" class="chapter" data-path="023.异常处理类 Exception.html">
        
        
        <a href="./023.异常处理类 Exception.html" ><b>23</b> 23.异常处理类 Exception</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="24" class="chapter" data-path="024.文件系统.html">
        
        
        <a href="./024.文件系统.html" ><b>24</b> 24.文件系统</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="25" class="chapter" data-path="025.文件的上传与下载.html">
        
        
        <a href="./025.文件的上传与下载.html" ><b>25</b> 025.文件的上传与下载</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="26" class="chapter active" data-path="026.GD库的使用-图片处理及验证码.html">
        
        
        <a href="./026.GD库的使用-图片处理及验证码.html" ><b>26</b> 026.GD库的使用-图片处理及验证码</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="27" class="chapter" data-path="027.版本控制-SVN.html">
        
        
        <a href="./027.版本控制-SVN.html" ><b>27</b> 027.版本控制-SVN</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="28" class="chapter" data-path="028.版本控制-GIT.html">
        
        
        <a href="./028.版本控制-GIT.html" ><b>28</b> 028.版本控制-GIT</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="29" class="chapter" data-path="029.日期与时间.html">
        
        
        <a href="./029.日期与时间.html" ><b>29</b> 029.日期与时间</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="30" class="chapter" data-path="030.PHP字符串处理与正则表达式.html">
        
        
        <a href="./030.PHP字符串处理与正则表达式.html" ><b>30</b> 30.PHP字符串处理与正则表达式</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="31" class="chapter" data-path="031.XML操作.html">
        
        
        <a href="./031.XML操作.html" ><b>31</b> 032.XML操作</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="32" class="chapter" data-path="032.邮件与短信发送.html">
        
        
        <a href="./032.邮件与短信发送.html" ><b>32</b> 031.邮件与短信发送</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="33" class="chapter" data-path="033.在线支付.html">
        
        
        <a href="./033.在线支付.html" ><b>33</b> 033.在线支付</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="34" class="chapter" data-path="034.HTML协议.html">
        
        
        <a href="./034.HTML协议.html" ><b>34</b> 033.HTML协议</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="35" class="chapter" data-path="035.会话控制之-Cookei.html">
        
        
        <a href="./035.会话控制之-Cookei.html" ><b>35</b> 034.会话控制之-Cookei</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="36" class="chapter" data-path="036.会话控制之-Session.html">
        
        
        <a href="./036.会话控制之-Session.html" ><b>36</b> 035.会话控制之-Session</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="37" class="chapter" data-path="037.缓存之-Memcache.html">
        
        
        <a href="./037.缓存之-Memcache.html" ><b>37</b> 036.缓存之-Memcache</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="38" class="chapter" data-path="038.redis01-下载安装启动.html">
        
        
        <a href="./038.redis01-下载安装启动.html" ><b>38</b> 041.redis01-下载安装启动</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="39" class="chapter" data-path="038.redis02-对于KEY的操作命令(公共命令).html">
        
        
        <a href="./038.redis02-对于KEY的操作命令(公共命令).html" ><b>39</b> 042.redis-对于KEY的操作命令(公共命令)</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="40" class="chapter" data-path="038.redis03-字符串类型的操作.html">
        
        
        <a href="./038.redis03-字符串类型的操作.html" ><b>40</b> 043.Redis字符串类型的操作</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="41" class="chapter" data-path="038.redis04-link链表结构(列表list).html">
        
        
        <a href="./038.redis04-link链表结构(列表list).html" ><b>41</b> 044.redis-link链表结构(就像自动整理索引值的索引数组. 下标 到 len-1)</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="42" class="chapter" data-path="038.redis05-set无序集合.html">
        
        
        <a href="./038.redis05-set无序集合.html" ><b>42</b> 045.redis-set无序集合</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="43" class="chapter" data-path="039.配置Apache2.4+PHP7.3+多站点.html">
        
        
        <a href="./039.配置Apache2.4+PHP7.3+多站点.html" ><b>43</b> 039.配置Apache2.4+PHP7.3+多站点</a>
        
            
                    
                
        
    </li>

            
                
                
    
    <li data-level="44" class="chapter" data-path="MySQL笔记/index.html">
        
        
        <a href="#" ><b>44</b> MySQL笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="44.1" class="chapter" data-path="MySQL笔记/01.MySQL的下载与安装.html">
        
        
        <a href="./MySQL笔记/01.MySQL的下载与安装.html" ><b>44.1</b> 01.MySQL的下载与安装配置</a>
        
    </li>

                            
                                
    
    <li data-level="44.2" class="chapter" data-path="MySQL笔记/02.MySQL配置-DOS管理工具登陆与退出.html">
        
        
        <a href="./MySQL笔记/02.MySQL配置-DOS管理工具登陆与退出.html" ><b>44.2</b> 02.MySQL配置-DOS管理工具登陆与退出</a>
        
    </li>

                            
                                
    
    <li data-level="44.3" class="chapter" data-path="MySQL笔记/03.数据库操作-语句规范与常用命令.html">
        
        
        <a href="./MySQL笔记/03.数据库操作-语句规范与常用命令.html" ><b>44.3</b> mysql语句规范与常用命令</a>
        
    </li>

                            
                                
    
    <li data-level="44.4" class="chapter" data-path="MySQL笔记/04.数据表操作.html">
        
        
        <a href="./MySQL笔记/04.数据表操作.html" ><b>44.4</b> 数据表操作</a>
        
    </li>

                            
                                
    
    <li data-level="44.5" class="chapter" data-path="MySQL笔记/05.数据操作-增删改.html">
        
        
        <a href="./MySQL笔记/05.数据操作-增删改.html" ><b>44.5</b> 05.数据操作-增删改</a>
        
    </li>

                            
                                
    
    <li data-level="44.6" class="chapter" data-path="MySQL笔记/06.数据操作 简单查询.html">
        
        
        <a href="./MySQL笔记/06.数据操作 简单查询.html" ><b>44.6</b> 06.数据操作 简单查询</a>
        
    </li>

                            
                                
    
    <li data-level="44.7" class="chapter" data-path="MySQL笔记/07.高级查询-排序 多表联合 聚合与分组 限制条数.html">
        
        
        <a href="./MySQL笔记/07.高级查询-排序 多表联合 聚合与分组 限制条数.html" ><b>44.7</b> 07.高级查询-排序 多表联合 聚合与分组 限制条数</a>
        
    </li>

                            
                                
    
    <li data-level="44.8" class="chapter" data-path="MySQL笔记/08.多表连接查询.html">
        
        
        <a href="./MySQL笔记/08.多表连接查询.html" ><b>44.8</b> 08.多表连接查询</a>
        
    </li>

                            
                                
    
    <li data-level="44.9" class="chapter" data-path="MySQL笔记/09.子查询 ANY ALL [NOT] IN [NOT]EXISTS.html">
        
        
        <a href="./MySQL笔记/09.子查询 ANY ALL [NOT] IN [NOT]EXISTS.html" ><b>44.9</b> 09.子查询 ANY ALL [NOT] IN [NOT]EXISTS</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="45" class="chapter" data-path="ThinkPHP3.1.2笔记/index.html">
        
        
        <a href="#" ><b>45</b> ThinkPHP3.1.2笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="45.1" class="chapter" data-path="ThinkPHP3.1.2笔记/01_ThinkPHP3.1.2介绍及安装.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/01_ThinkPHP3.1.2介绍及安装.html" ><b>45.1</b> ThinkPHP3.1.2介绍及安装</a>
        
    </li>

                            
                                
    
    <li data-level="45.2" class="chapter" data-path="ThinkPHP3.1.2笔记/02_ThinkPHP3.1.2MVC模式和URL访问.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/02_ThinkPHP3.1.2MVC模式和URL访问.html" ><b>45.2</b> ThinkPHP 3.1.2 MVC模式和URL访问</a>
        
    </li>

                            
                                
    
    <li data-level="45.3" class="chapter" data-path="ThinkPHP3.1.2笔记/03_ThinkPHP3.1.2输出和模型使用.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/03_ThinkPHP3.1.2输出和模型使用.html" ><b>45.3</b> ThinkPHP 3.1.2 输出和模型使用</a>
        
    </li>

                            
                                
    
    <li data-level="45.4" class="chapter" data-path="ThinkPHP3.1.2笔记/04_ThinkPHP3.1.2_CURD特性.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/04_ThinkPHP3.1.2_CURD特性.html" ><b>45.4</b> ThinkPHP中CURD特性</a>
        
    </li>

                            
                                
    
    <li data-level="45.5" class="chapter" data-path="ThinkPHP3.1.2笔记/05_ThinkPHP3.1.2_CURD实例.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/05_ThinkPHP3.1.2_CURD实例.html" ><b>45.5</b> ThinkPHP_CURD实例,操作数据</a>
        
    </li>

                            
                                
    
    <li data-level="45.6" class="chapter" data-path="ThinkPHP3.1.2笔记/06_ThinkPHP3.1.2_查询方式的一般使用.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/06_ThinkPHP3.1.2_查询方式的一般使用.html" ><b>45.6</b> 查询方式的一般使用</a>
        
    </li>

                            
                                
    
    <li data-level="45.7" class="chapter" data-path="ThinkPHP3.1.2笔记/07_ThinkPHP3.1.2_查询方式实例.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/07_ThinkPHP3.1.2_查询方式实例.html" ><b>45.7</b> 07_ThinkPHP3.1.2_查询方式实例</a>
        
    </li>

                            
                                
    
    <li data-level="45.8" class="chapter" data-path="ThinkPHP3.1.2笔记/08_ThinkPHP3.2.1_连惯操作.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/08_ThinkPHP3.2.1_连惯操作.html" ><b>45.8</b> 08_ThinkPHP3.1.2_连惯操作</a>
        
    </li>

                            
                                
    
    <li data-level="45.9" class="chapter" data-path="ThinkPHP3.1.2笔记/09_ThinkPHP3.1.2_视图.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/09_ThinkPHP3.1.2_视图.html" ><b>45.9</b> 视图</a>
        
    </li>

                            
                                
    
    <li data-level="45.10" class="chapter" data-path="ThinkPHP3.1.2笔记/10_ThinkPHP3.1.2_视图实例_用户登陆.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/10_ThinkPHP3.1.2_视图实例_用户登陆.html" ><b>45.10</b> 视图实例_用户登陆</a>
        
    </li>

                            
                                
    
    <li data-level="45.11" class="chapter" data-path="ThinkPHP3.1.2笔记/11_ThinkPHP3.1.2_模板变量详解.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/11_ThinkPHP3.1.2_模板变量详解.html" ><b>45.11</b> 模板变量详解</a>
        
    </li>

                            
                                
    
    <li data-level="45.12" class="chapter" data-path="ThinkPHP3.1.2笔记/12_ThinkPHP3.1.2_模板中的语法知识.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/12_ThinkPHP3.1.2_模板中的语法知识.html" ><b>45.12</b> 模板中的语法知识</a>
        
    </li>

                            
                                
    
    <li data-level="45.13" class="chapter" data-path="ThinkPHP3.1.2笔记/13_ThinkPHP3.1.2_模板的使用技巧.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/13_ThinkPHP3.1.2_模板的使用技巧.html" ><b>45.13</b> 模板的使用技巧</a>
        
    </li>

                            
                                
    
    <li data-level="45.14" class="chapter" data-path="ThinkPHP3.1.2笔记/配置项.html">
        
        
        <a href="./ThinkPHP3.1.2笔记/配置项.html" ><b>45.14</b> 配置项</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="46" class="chapter" data-path="bootstrap笔记/index.html">
        
        
        <a href="#" ><b>46</b> bootstrap笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="46.1" class="chapter" data-path="bootstrap笔记/01. Bootstrap 介绍.html">
        
        
        <a href="./bootstrap笔记/01. Bootstrap 介绍.html" ><b>46.1</b> 01. Bootstrap 介绍</a>
        
    </li>

                            
                                
    
    <li data-level="46.2" class="chapter" data-path="bootstrap笔记/02. Bootstrap 排版样式.html">
        
        
        <a href="./bootstrap笔记/02. Bootstrap 排版样式.html" ><b>46.2</b> Bootstrap 排版样式</a>
        
    </li>

                            
                                
    
    <li data-level="46.3" class="chapter" data-path="bootstrap笔记/03. Bootstrap 表格和按钮.html">
        
        
        <a href="./bootstrap笔记/03. Bootstrap 表格和按钮.html" ><b>46.3</b> 03. Bootstrap 表格和按钮</a>
        
    </li>

                            
                                
    
    <li data-level="46.4" class="chapter" data-path="bootstrap笔记/04. Bootstrap 栅格系统.html">
        
        
        <a href="./bootstrap笔记/04. Bootstrap 栅格系统.html" ><b>46.4</b> Bootstrap 栅格系统</a>
        
    </li>

                            
                                
    
    <li data-level="46.5" class="chapter" data-path="bootstrap笔记/05.  Bootstrap 表单和图片.html">
        
        
        <a href="./bootstrap笔记/05.  Bootstrap 表单和图片.html" ><b>46.5</b> 04.  Bootstrap 表单和图片</a>
        
    </li>

                            
                                
    
    <li data-level="46.6" class="chapter" data-path="bootstrap笔记/06. 辅组类和响应式工具.html">
        
        
        <a href="./bootstrap笔记/06. 辅组类和响应式工具.html" ><b>46.6</b> 辅组类和响应式工具</a>
        
    </li>

                            
                                
    
    <li data-level="46.7" class="chapter" data-path="bootstrap笔记/07. 图标菜单按钮组件.html">
        
        
        <a href="./bootstrap笔记/07. 图标菜单按钮组件.html" ><b>46.7</b> 图标菜单按钮组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.8" class="chapter" data-path="bootstrap笔记/08. 输入框和导航组件.html">
        
        
        <a href="./bootstrap笔记/08. 输入框和导航组件.html" ><b>46.8</b> 输入框和导航组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.9" class="chapter" data-path="bootstrap笔记/09. 路径分页标签和徽章组件.html">
        
        
        <a href="./bootstrap笔记/09. 路径分页标签和徽章组件.html" ><b>46.9</b> 路径分页标签和徽章组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.10" class="chapter" data-path="bootstrap笔记/10. 巨幕页头缩略图和警告框组件.html">
        
        
        <a href="./bootstrap笔记/10. 巨幕页头缩略图和警告框组件.html" ><b>46.10</b> 巨幕页头缩略图和警告框组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.11" class="chapter" data-path="bootstrap笔记/11. 进度条媒体对象和Well组件.html">
        
        
        <a href="./bootstrap笔记/11. 进度条媒体对象和Well组件.html" ><b>46.11</b> 进度条媒体对象和Well组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.12" class="chapter" data-path="bootstrap笔记/12. 列表组面板和嵌入组件.html">
        
        
        <a href="./bootstrap笔记/12. 列表组面板和嵌入组件.html" ><b>46.12</b> 列表组面板和嵌入组件</a>
        
    </li>

                            
                                
    
    <li data-level="46.13" class="chapter" data-path="bootstrap笔记/13. 模态框插件.html">
        
        
        <a href="./bootstrap笔记/13. 模态框插件.html" ><b>46.13</b> 模态框插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.14" class="chapter" data-path="bootstrap笔记/14. 下拉菜单和滚动监听插件.html">
        
        
        <a href="./bootstrap笔记/14. 下拉菜单和滚动监听插件.html" ><b>46.14</b> 下拉菜单和滚动监听插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.15" class="chapter" data-path="bootstrap笔记/15. 标签页和工具提示插件.html">
        
        
        <a href="./bootstrap笔记/15. 标签页和工具提示插件.html" ><b>46.15</b> 标签页和工具提示插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.16" class="chapter" data-path="bootstrap笔记/16. 弹出框和警告框插件.html">
        
        
        <a href="./bootstrap笔记/16. 弹出框和警告框插件.html" ><b>46.16</b> 弹出框和警告框插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.17" class="chapter" data-path="bootstrap笔记/17. 按钮和折叠插件.html">
        
        
        <a href="./bootstrap笔记/17. 按钮和折叠插件.html" ><b>46.17</b> 按钮和折叠插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.18" class="chapter" data-path="bootstrap笔记/18. 轮播插件.html">
        
        
        <a href="./bootstrap笔记/18. 轮播插件.html" ><b>46.18</b> 轮播插件</a>
        
    </li>

                            
                                
    
    <li data-level="46.19" class="chapter" data-path="bootstrap笔记/19. 附加导航插件.html">
        
        
        <a href="./bootstrap笔记/19. 附加导航插件.html" ><b>46.19</b> 附加导航插件</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="47" class="chapter" data-path="es6/index.html">
        
        
        <a href="#" ><b>47</b> es6</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="47.1" class="chapter" data-path="es6/01-项目目录创建.html">
        
        
        <a href="./es6/01-项目目录创建.html" ><b>47.1</b> 01-项目目录创建</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="48" class="chapter" data-path="jquery笔记/index.html">
        
        
        <a href="#" ><b>48</b> jquery笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="48.1" class="chapter" data-path="jquery笔记/16.14 jQuery-UI 知问前端--cookie 插件.html">
        
        
        <a href="./jquery笔记/16.14 jQuery-UI 知问前端--cookie 插件.html" ><b>48.1</b> jQuery-UI 知问前端--cookie 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.2" class="chapter" data-path="jquery笔记/01.JQUERY入门.html">
        
        
        <a href="./jquery笔记/01.JQUERY入门.html" ><b>48.2</b> 01.JQUERY入门</a>
        
    </li>

                            
                                
    
    <li data-level="48.3" class="chapter" data-path="jquery笔记/02.jQuery基础核心.html">
        
        
        <a href="./jquery笔记/02.jQuery基础核心.html" ><b>48.3</b> 02.jQuery基础核心</a>
        
    </li>

                            
                                
    
    <li data-level="48.4" class="chapter" data-path="jquery笔记/03.jQuery常规选择器.html">
        
        
        <a href="./jquery笔记/03.jQuery常规选择器.html" ><b>48.4</b> 03.jQuery常规选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.5" class="chapter" data-path="jquery笔记/04.jQuery过滤选择器.html">
        
        
        <a href="./jquery笔记/04.jQuery过滤选择器.html" ><b>48.5</b> 04.jQuery过滤选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.6" class="chapter" data-path="jquery笔记/05.jQuery基础DOM和CSS操作.html">
        
        
        <a href="./jquery笔记/05.jQuery基础DOM和CSS操作.html" ><b>48.6</b> 05. 基础DOM和CSS操作</a>
        
    </li>

                            
                                
    
    <li data-level="48.7" class="chapter" data-path="jquery笔记/06.jQuery DOM节点操作.html">
        
        
        <a href="./jquery笔记/06.jQuery DOM节点操作.html" ><b>48.7</b> 06.jQuery DOM节点操作</a>
        
    </li>

                            
                                
    
    <li data-level="48.8" class="chapter" data-path="jquery笔记/07. jQuery表单选择器.html">
        
        
        <a href="./jquery笔记/07. jQuery表单选择器.html" ><b>48.8</b> 07. jQuery表单选择器</a>
        
    </li>

                            
                                
    
    <li data-level="48.9" class="chapter" data-path="jquery笔记/08. jQuery基础事件.html">
        
        
        <a href="./jquery笔记/08. jQuery基础事件.html" ><b>48.9</b> jQuery基础事件</a>
        
    </li>

                            
                                
    
    <li data-level="48.10" class="chapter" data-path="jquery笔记/09. jQuery事件对象.html">
        
        
        <a href="./jquery笔记/09. jQuery事件对象.html" ><b>48.10</b> 09. jQuery事件对象</a>
        
    </li>

                            
                                
    
    <li data-level="48.11" class="chapter" data-path="jquery笔记/10. jQuery高级事件.html">
        
        
        <a href="./jquery笔记/10. jQuery高级事件.html" ><b>48.11</b> 10. jQuery高级事件</a>
        
    </li>

                            
                                
    
    <li data-level="48.12" class="chapter" data-path="jquery笔记/11.jQuery动画效果.html">
        
        
        <a href="./jquery笔记/11.jQuery动画效果.html" ><b>48.12</b> 11.jQuery动画效果</a>
        
    </li>

                            
                                
    
    <li data-level="48.13" class="chapter" data-path="jquery笔记/12.jQuery-Ajax.html">
        
        
        <a href="./jquery笔记/12.jQuery-Ajax.html" ><b>48.13</b> 12.jQuery-Ajax</a>
        
    </li>

                            
                                
    
    <li data-level="48.14" class="chapter" data-path="jquery笔记/13. jQuery-Ajax 进阶.html">
        
        
        <a href="./jquery笔记/13. jQuery-Ajax 进阶.html" ><b>48.14</b> 13. jQuery-Ajax 进阶</a>
        
    </li>

                            
                                
    
    <li data-level="48.15" class="chapter" data-path="jquery笔记/14. jQquery工具函数.html">
        
        
        <a href="./jquery笔记/14. jQquery工具函数.html" ><b>48.15</b> 14. jQquery工具函数</a>
        
    </li>

                            
                                
    
    <li data-level="48.16" class="chapter" data-path="jquery笔记/15. jQuery 插件.html">
        
        
        <a href="./jquery笔记/15. jQuery 插件.html" ><b>48.16</b> 15. jQuery 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.17" class="chapter" data-path="jquery笔记/16. 01  jQuery-UI 知问前端概述 .html">
        
        
        <a href="./jquery笔记/16. 01  jQuery-UI 知问前端概述 .html" ><b>48.17</b> jQuery-UI 概述及下载安装</a>
        
    </li>

                            
                                
    
    <li data-level="48.18" class="chapter" data-path="jquery笔记/16. 02 jQuery-UI 知问前端--创建 header 区.html">
        
        
        <a href="./jquery笔记/16. 02 jQuery-UI 知问前端--创建 header 区.html" ><b>48.18</b> jQuery-UI 知问前端--创建 header 区</a>
        
    </li>

                            
                                
    
    <li data-level="48.19" class="chapter" data-path="jquery笔记/16. 03jQuery-UI 知问前端--对话框UI.html">
        
        
        <a href="./jquery笔记/16. 03jQuery-UI 知问前端--对话框UI.html" ><b>48.19</b> jQuery-UI 知问前端--对话框UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.20" class="chapter" data-path="jquery笔记/16. 04 jQuery-UI 知问前端 - 按钮UI.html">
        
        
        <a href="./jquery笔记/16. 04 jQuery-UI 知问前端 - 按钮UI.html" ><b>48.20</b> jQuery-UI 知问前端 - 按钮UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.21" class="chapter" data-path="jquery笔记/16. 05 jQuery-UI 知问前端--创建注册表单.html">
        
        
        <a href="./jquery笔记/16. 05 jQuery-UI 知问前端--创建注册表单.html" ><b>48.21</b> jQuery-UI 知问前端--创建注册表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.22" class="chapter" data-path="jquery笔记/16. 06 jQuery-UI 知问前端--工具提示 UI.html">
        
        
        <a href="./jquery笔记/16. 06 jQuery-UI 知问前端--工具提示 UI.html" ><b>48.22</b> jQuery-UI 知问前端--工具提示 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.23" class="chapter" data-path="jquery笔记/16. 07 jQuery-UI 知问前端 - 自动补全UI.html">
        
        
        <a href="./jquery笔记/16. 07 jQuery-UI 知问前端 - 自动补全UI.html" ><b>48.23</b> jQuery-UI 知问前端 - 自动补全UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.24" class="chapter" data-path="jquery笔记/16. 08 jQuery-UI 知问前端--邮箱自动补全.html">
        
        
        <a href="./jquery笔记/16. 08 jQuery-UI 知问前端--邮箱自动补全.html" ><b>48.24</b> jQuery-UI 知问前端--邮箱自动补全</a>
        
    </li>

                            
                                
    
    <li data-level="48.25" class="chapter" data-path="jquery笔记/16. 09 jQuery-UI 知问前端--日历UI.html">
        
        
        <a href="./jquery笔记/16. 09 jQuery-UI 知问前端--日历UI.html" ><b>48.25</b> 16. 09 jQuery-UI 知问前端--日历UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.26" class="chapter" data-path="jquery笔记/16. 10 jQuery-UI 知问前端--验证插件.html">
        
        
        <a href="./jquery笔记/16. 10 jQuery-UI 知问前端--验证插件.html" ><b>48.26</b> jQuery-UI 知问前端--验证插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.27" class="chapter" data-path="jquery笔记/16. 11 jQuery-UI 知问前端--验证注册表单.html">
        
        
        <a href="./jquery笔记/16. 11 jQuery-UI 知问前端--验证注册表单.html" ><b>48.27</b> jQuery-UI 知问前端--验证注册表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.28" class="chapter" data-path="jquery笔记/16. 12 jQuery-UI 知问前端--Ajax 表单插件.html">
        
        
        <a href="./jquery笔记/16. 12 jQuery-UI 知问前端--Ajax 表单插件.html" ><b>48.28</b> jQuery-UI 知问前端--Ajax 表单插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.29" class="chapter" data-path="jquery笔记/16. 13 jQuery-UI 知问前端--Ajax 提交表单.html">
        
        
        <a href="./jquery笔记/16. 13 jQuery-UI 知问前端--Ajax 提交表单.html" ><b>48.29</b> jQuery-UI 知问前端--Ajax 提交表单</a>
        
    </li>

                            
                                
    
    <li data-level="48.30" class="chapter" data-path="jquery笔记/16. 14 jQuery-UI 知问前端--cookie 插件.html">
        
        
        <a href="./jquery笔记/16. 14 jQuery-UI 知问前端--cookie 插件.html" ><b>48.30</b> jQuery-UI 知问前端--cookie 插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.31" class="chapter" data-path="jquery笔记/16. 15 jQuery-UI 知问前端--Ajax 登录.html">
        
        
        <a href="./jquery笔记/16. 15 jQuery-UI 知问前端--Ajax 登录.html" ><b>48.31</b> jQuery-UI 知问前端--Ajax 登录</a>
        
    </li>

                            
                                
    
    <li data-level="48.32" class="chapter" data-path="jquery笔记/16. 16 jQuery-UI 知问前端--选项卡 UI.html">
        
        
        <a href="./jquery笔记/16. 16 jQuery-UI 知问前端--选项卡 UI.html" ><b>48.32</b> jQuery-UI 知问前端--选项卡 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.33" class="chapter" data-path="jquery笔记/16. 17 jQuery-UI 知问前端--折叠菜单 UI.html">
        
        
        <a href="./jquery笔记/16. 17 jQuery-UI 知问前端--折叠菜单 UI.html" ><b>48.33</b> jQuery-UI 知问前端--折叠菜单 UI</a>
        
    </li>

                            
                                
    
    <li data-level="48.34" class="chapter" data-path="jquery笔记/16. 18 jQuery-UI 知问前端--编辑器插件.html">
        
        
        <a href="./jquery笔记/16. 18 jQuery-UI 知问前端--编辑器插件.html" ><b>48.34</b> jQuery-UI 知问前端--编辑器插件</a>
        
    </li>

                            
                                
    
    <li data-level="48.35" class="chapter" data-path="jquery笔记/16. 19 jQuery-UI 知问前端--Ajax 提问.html">
        
        
        <a href="./jquery笔记/16. 19 jQuery-UI 知问前端--Ajax 提问.html" ><b>48.35</b> jQuery-UI 知问前端--Ajax 提问</a>
        
    </li>

                            
                                
    
    <li data-level="48.36" class="chapter" data-path="jquery笔记/16. 20 jQquery-UI 知问前端--Ajax 显示.html">
        
        
        <a href="./jquery笔记/16. 20 jQquery-UI 知问前端--Ajax 显示.html" ><b>48.36</b> jQquery-UI 知问前端--Ajax 显示</a>
        
    </li>

                            
                                
    
    <li data-level="48.37" class="chapter" data-path="jquery笔记/16. 21 jQuery-UI 知问前端--Ajax 提交评论.html">
        
        
        <a href="./jquery笔记/16. 21 jQuery-UI 知问前端--Ajax 提交评论.html" ><b>48.37</b> jQuery-UI 知问前端--Ajax 提交评论</a>
        
    </li>

                            
                                
    
    <li data-level="48.38" class="chapter" data-path="jquery笔记/16. 22 jQuery-UI 知问前端--Ajax 显示评论.html">
        
        
        <a href="./jquery笔记/16. 22 jQuery-UI 知问前端--Ajax 显示评论.html" ><b>48.38</b> jQuery-UI 知问前端--Ajax 显示评论</a>
        
    </li>

                            
                                
    
    <li data-level="48.39" class="chapter" data-path="jquery笔记/16. 23 jQuery-UI 知问前端--Ajax 加载更多.html">
        
        
        <a href="./jquery笔记/16. 23 jQuery-UI 知问前端--Ajax 加载更多.html" ><b>48.39</b> jQuery-UI 知问前端--Ajax 加载更多</a>
        
    </li>

                            
                                
    
    <li data-level="48.40" class="chapter" data-path="jquery笔记/16. 24 jQuery-UI 知问前端--总结及屏蔽低版 IE.html">
        
        
        <a href="./jquery笔记/16. 24 jQuery-UI 知问前端--总结及屏蔽低版 IE.html" ><b>48.40</b> jQuery-UI 知问前端--总结及屏蔽低版 IE</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="49" class="chapter" data-path="thinkphp3.2备课笔记/index.html">
        
        
        <a href="#" ><b>49</b> thinkphp3.2备课笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="49.1" class="chapter" data-path="thinkphp3.2备课笔记/01.ThinkPHP-为什么要使用框架.html">
        
        
        <a href="./thinkphp3.2备课笔记/01.ThinkPHP-为什么要使用框架.html" ><b>49.1</b> 01.ThinkPHP-为什么要使用框架</a>
        
    </li>

                            
                                
    
    <li data-level="49.2" class="chapter" data-path="thinkphp3.2备课笔记/02.ThinkPHP-安装与配置.html">
        
        
        <a href="./thinkphp3.2备课笔记/02.ThinkPHP-安装与配置.html" ><b>49.2</b> 02.ThinkPHP-安装与配置</a>
        
    </li>

                            
                                
    
    <li data-level="49.3" class="chapter" data-path="thinkphp3.2备课笔记/03.ThinkPHP--模块化和URL模式.html">
        
        
        <a href="./thinkphp3.2备课笔记/03.ThinkPHP--模块化和URL模式.html" ><b>49.3</b> 03.ThinkPHP--模块化和URL模式</a>
        
    </li>

                            
                                
    
    <li data-level="49.4" class="chapter" data-path="thinkphp3.2备课笔记/04.ThinkPHP-数据库模型初级.html">
        
        
        <a href="./thinkphp3.2备课笔记/04.ThinkPHP-数据库模型初级.html" ><b>49.4</b> 04.ThinkPHP-数据库模型初级</a>
        
    </li>

                            
                                
    
    <li data-level="49.5" class="chapter" data-path="thinkphp3.2备课笔记/05.ThinkPHP-SQL查询语句.html">
        
        
        <a href="./thinkphp3.2备课笔记/05.ThinkPHP-SQL查询语句.html" ><b>49.5</b> 05.ThinkPHP-SQL查询语句</a>
        
    </li>

                            
                                
    
    <li data-level="49.6" class="chapter" data-path="thinkphp3.2备课笔记/06.ThinkPHP-SQL连惯操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/06.ThinkPHP-SQL连惯操作.html" ><b>49.6</b> ThinkPHP-SQL连惯操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.7" class="chapter" data-path="thinkphp3.2备课笔记/07.ThinkPHP-CURD操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/07.ThinkPHP-CURD操作.html" ><b>49.7</b> 07.ThinkPHP-CURD操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.8" class="chapter" data-path="thinkphp3.2备课笔记/08.ThinkPHP-自动验证.html">
        
        
        <a href="./thinkphp3.2备课笔记/08.ThinkPHP-自动验证.html" ><b>49.8</b> 08.ThinkPHP-自动验证</a>
        
    </li>

                            
                                
    
    <li data-level="49.9" class="chapter" data-path="thinkphp3.2备课笔记/09.ThinkPHP-自动完成.html">
        
        
        <a href="./thinkphp3.2备课笔记/09.ThinkPHP-自动完成.html" ><b>49.9</b> 09.ThinkPHP-自动完成</a>
        
    </li>

                            
                                
    
    <li data-level="49.10" class="chapter" data-path="thinkphp3.2备课笔记/10.ThinkPHP-视图.html">
        
        
        <a href="./thinkphp3.2备课笔记/10.ThinkPHP-视图.html" ><b>49.10</b> 10.ThinkPHP-视图</a>
        
    </li>

                            
                                
    
    <li data-level="49.11" class="chapter" data-path="thinkphp3.2备课笔记/11.ThinkPHP-模板基础.html">
        
        
        <a href="./thinkphp3.2备课笔记/11.ThinkPHP-模板基础.html" ><b>49.11</b> 11.ThinkPHP-模板基础</a>
        
    </li>

                            
                                
    
    <li data-level="49.12" class="chapter" data-path="thinkphp3.2备课笔记/12.ThinkPHP-内置标签.html">
        
        
        <a href="./thinkphp3.2备课笔记/12.ThinkPHP-内置标签.html" ><b>49.12</b> 12.ThinkPHP-内置标签</a>
        
    </li>

                            
                                
    
    <li data-level="49.13" class="chapter" data-path="thinkphp3.2备课笔记/13.ThinkPHP-标签库.html">
        
        
        <a href="./thinkphp3.2备课笔记/13.ThinkPHP-标签库.html" ><b>49.13</b> 13.ThinkPHP-标签库</a>
        
    </li>

                            
                                
    
    <li data-level="49.14" class="chapter" data-path="thinkphp3.2备课笔记/14.ThinkPHP-路由功能.html">
        
        
        <a href="./thinkphp3.2备课笔记/14.ThinkPHP-路由功能.html" ><b>49.14</b> 14.ThinkPHP-路由功能</a>
        
    </li>

                            
                                
    
    <li data-level="49.15" class="chapter" data-path="thinkphp3.2备课笔记/15.Thinkphp-URL操作.html">
        
        
        <a href="./thinkphp3.2备课笔记/15.Thinkphp-URL操作.html" ><b>49.15</b> 15.ThinkPHP-URL操作</a>
        
    </li>

                            
                                
    
    <li data-level="49.16" class="chapter" data-path="thinkphp3.2备课笔记/16.ThinkPHP-控制器.html">
        
        
        <a href="./thinkphp3.2备课笔记/16.ThinkPHP-控制器.html" ><b>49.16</b> 16.ThinkPHP-控制器</a>
        
    </li>

                            
                                
    
    <li data-level="49.17" class="chapter" data-path="thinkphp3.2备课笔记/17.ThinkPHP-session与cookie.html">
        
        
        <a href="./thinkphp3.2备课笔记/17.ThinkPHP-session与cookie.html" ><b>49.17</b> 17.ThinkPHP-session与cookie</a>
        
    </li>

                            
                                
    
    <li data-level="49.18" class="chapter" data-path="thinkphp3.2备课笔记/18.ThinkPHP图像处理.html">
        
        
        <a href="./thinkphp3.2备课笔记/18.ThinkPHP图像处理.html" ><b>49.18</b> 18.ThinkPHP图像处理</a>
        
    </li>

                            
                                
    
    <li data-level="49.19" class="chapter" data-path="thinkphp3.2备课笔记/19.ThinkPHP-验证码.html">
        
        
        <a href="./thinkphp3.2备课笔记/19.ThinkPHP-验证码.html" ><b>49.19</b> 19.ThinkPHP-验证码</a>
        
    </li>

                            
                                
    
    <li data-level="49.20" class="chapter" data-path="thinkphp3.2备课笔记/20.ThinkPHP-文件上传.html">
        
        
        <a href="./thinkphp3.2备课笔记/20.ThinkPHP-文件上传.html" ><b>49.20</b> 20.ThinkPHP-文件上传</a>
        
    </li>

                            
                                
    
    <li data-level="49.21" class="chapter" data-path="thinkphp3.2备课笔记/21.ThinkPHP-多语言.html">
        
        
        <a href="./thinkphp3.2备课笔记/21.ThinkPHP-多语言.html" ><b>49.21</b> 21.ThinkPHP-多语言</a>
        
    </li>

                            
                                
    
    <li data-level="49.22" class="chapter" data-path="thinkphp3.2备课笔记/22.ThinkPHP-auth权限控制.html">
        
        
        <a href="./thinkphp3.2备课笔记/22.ThinkPHP-auth权限控制.html" ><b>49.22</b> 22.ThinkPHP-auth权限控制</a>
        
    </li>

                            
                                
    
    <li data-level="49.23" class="chapter" data-path="thinkphp3.2备课笔记/23.ThinkPHP-关联模型.html">
        
        
        <a href="./thinkphp3.2备课笔记/23.ThinkPHP-关联模型.html" ><b>49.23</b> 23.ThinkPHP-关联模型</a>
        
    </li>

                            
                                
    
    <li data-level="49.24" class="chapter" data-path="thinkphp3.2备课笔记/24.ThinkPHP-视图模型与分页.html">
        
        
        <a href="./thinkphp3.2备课笔记/24.ThinkPHP-视图模型与分页.html" ><b>49.24</b> 24.ThinkPHP-视图模型与分页</a>
        
    </li>

                            
                                
    
    <li data-level="49.25" class="chapter" data-path="thinkphp3.2备课笔记/25.ThinkPHP-缓存处理.html">
        
        
        <a href="./thinkphp3.2备课笔记/25.ThinkPHP-缓存处理.html" ><b>49.25</b> 25.ThinkPHP-缓存处理</a>
        
    </li>

                            
                                
    
    <li data-level="49.26" class="chapter" data-path="thinkphp3.2备课笔记/26.ThinkPHP-调试方法.html">
        
        
        <a href="./thinkphp3.2备课笔记/26.ThinkPHP-调试方法.html" ><b>49.26</b> 26.ThinkPHP-调试方法</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="50" class="chapter" data-path="thinkphp5备课笔记/index.html">
        
        
        <a href="#" ><b>50</b> thinkphp5备课笔记</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="50.1" class="chapter" data-path="thinkphp5备课笔记/01.ThinkPHP5.0-安装与配置.html">
        
        
        <a href="./thinkphp5备课笔记/01.ThinkPHP5.0-安装与配置.html" ><b>50.1</b> 01.ThinkPHP5.0-安装与配置</a>
        
    </li>

                            
                                
    
    <li data-level="50.2" class="chapter" data-path="thinkphp5备课笔记/02.ThinkPHP5.0-模块化与URL访问.html">
        
        
        <a href="./thinkphp5备课笔记/02.ThinkPHP5.0-模块化与URL访问.html" ><b>50.2</b> 0.2ThinkPHP5.0-模块化与URL访问</a>
        
    </li>

                            
                                
    
    <li data-level="50.3" class="chapter" data-path="thinkphp5备课笔记/03.ThinkPHP5.0-URL访问与路由.html">
        
        
        <a href="./thinkphp5备课笔记/03.ThinkPHP5.0-URL访问与路由.html" ><b>50.3</b> 03.ThinkPHP5.0-URL访问与路由</a>
        
    </li>

                            
                                
    
    <li data-level="50.4" class="chapter" data-path="thinkphp5备课笔记/04.ThinkPHP5.0-请求与向应.html">
        
        
        <a href="./thinkphp5备课笔记/04.ThinkPHP5.0-请求与向应.html" ><b>50.4</b> 04.ThinkPHP5.0-请求与向应</a>
        
    </li>

                            
                                
    
    <li data-level="50.5" class="chapter" data-path="thinkphp5备课笔记/05.ThinkPHP5.0-数据库基本操作.html">
        
        
        <a href="./thinkphp5备课笔记/05.ThinkPHP5.0-数据库基本操作.html" ><b>50.5</b> 05.ThinkPHP5.0-数据库基本操作</a>
        
    </li>

                            
                                
    
    <li data-level="50.6" class="chapter" data-path="thinkphp5备课笔记/06.ThinkPHP5.0-数据库操作-增删改.html">
        
        
        <a href="./thinkphp5备课笔记/06.ThinkPHP5.0-数据库操作-增删改.html" ><b>50.6</b> 06.Thinkphp5.0-数据库操作-增删改</a>
        
    </li>

                            
                                
    
    <li data-level="50.7" class="chapter" data-path="thinkphp5备课笔记/07.ThinkPHP5.0-数据库查询.html">
        
        
        <a href="./thinkphp5备课笔记/07.ThinkPHP5.0-数据库查询.html" ><b>50.7</b> ThinkPHP5.0-数据库查询</a>
        
    </li>

                            
                                
    
    <li data-level="50.8" class="chapter" data-path="thinkphp5备课笔记/08.ThinkPHP5.0-模型.html">
        
        
        <a href="./thinkphp5备课笔记/08.ThinkPHP5.0-模型.html" ><b>50.8</b> ThinkPHP5.0-模型</a>
        
    </li>

                            
                                
    
    <li data-level="50.9" class="chapter" data-path="thinkphp5备课笔记/09.ThinkPHP5.0-验证.html">
        
        
        <a href="./thinkphp5备课笔记/09.ThinkPHP5.0-验证.html" ><b>50.9</b> 09.ThinkPHP5.0-验证</a>
        
    </li>

                            
                                
    
    <li data-level="50.10" class="chapter" data-path="thinkphp5备课笔记/10.ThinkPHP5.0-视图和模板.html">
        
        
        <a href="./thinkphp5备课笔记/10.ThinkPHP5.0-视图和模板.html" ><b>50.10</b> 10.ThinkPHP5.0-视图和模板</a>
        
    </li>

                            
                                
    
    <li data-level="50.11" class="chapter" data-path="thinkphp5备课笔记/11.ThinkPHP5.0-模板引擎.html">
        
        
        <a href="./thinkphp5备课笔记/11.ThinkPHP5.0-模板引擎.html" ><b>50.11</b> 11.ThinkPHP5.0-模板引擎</a>
        
    </li>

                            
                                
    
    <li data-level="50.12" class="chapter" data-path="thinkphp5备课笔记/12.ThinkPHP5.0-错误调试与日志.html">
        
        
        <a href="./thinkphp5备课笔记/12.ThinkPHP5.0-错误调试与日志.html" ><b>50.12</b> 12.ThinkPHP5.0-错误调试与日志</a>
        
    </li>

                            
                                
    
    <li data-level="50.13" class="chapter" data-path="thinkphp5备课笔记/13.ThinkPHP5.0-扩展.html">
        
        
        <a href="./thinkphp5备课笔记/13.ThinkPHP5.0-扩展.html" ><b>50.13</b> 13.ThinkPHP5.0-扩展</a>
        
    </li>

                            
                                
    
    <li data-level="50.14" class="chapter" data-path="thinkphp5备课笔记/14.ThinkPHP5.0-session与cookie.html">
        
        
        <a href="./thinkphp5备课笔记/14.ThinkPHP5.0-session与cookie.html" ><b>50.14</b> 14.ThinkPHP5.0-session与cookie</a>
        
    </li>

                            
                                
    
    <li data-level="50.15" class="chapter" data-path="thinkphp5备课笔记/15.ThinkPHP5.0-验证码.html">
        
        
        <a href="./thinkphp5备课笔记/15.ThinkPHP5.0-验证码.html" ><b>50.15</b> 15.ThinkPHP5.0-验证码</a>
        
    </li>

                            
                                
    
    <li data-level="50.16" class="chapter" data-path="thinkphp5备课笔记/16.ThinkPHP5.0-文件上传.html">
        
        
        <a href="./thinkphp5备课笔记/16.ThinkPHP5.0-文件上传.html" ><b>50.16</b> 16.ThinkPHP5.0-文件上传</a>
        
    </li>

                            
                                
    
    <li data-level="50.17" class="chapter" data-path="thinkphp5备课笔记/17.ThinkPHP5.0-图片处理.html">
        
        
        <a href="./thinkphp5备课笔记/17.ThinkPHP5.0-图片处理.html" ><b>50.17</b> 17.ThinkPHP5.0-图片处理</a>
        
    </li>

                            
                                
    
    <li data-level="50.18" class="chapter" data-path="thinkphp5备课笔记/18.ThinkPHP5.0-缓存.html">
        
        
        <a href="./thinkphp5备课笔记/18.ThinkPHP5.0-缓存.html" ><b>50.18</b> 18.ThinkPHP5.0-缓存</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
                
                
    
    <li data-level="51" class="chapter" data-path="微信小程序/index.html">
        
        
        <a href="#" ><b>51</b> 微信小程序</a>
        
            
                    
                        <ul class="articles">
                            
                                
    
    <li data-level="51.1" class="chapter" data-path="微信小程序/01-微信小程序账号与工具.html">
        
        
        <a href="./微信小程序/01-微信小程序账号与工具.html" ><b>51.1</b> 微信小程序账号与工具</a>
        
    </li>

                            
                                
    
    <li data-level="51.2" class="chapter" data-path="微信小程序/02-微信小程序文件结构.html">
        
        
        <a href="./微信小程序/02-微信小程序文件结构.html" ><b>51.2</b> 微信小程序文件结构</a>
        
    </li>

                            
                                
    
    <li data-level="51.3" class="chapter" data-path="微信小程序/03-微信小程序配置-JSON.html">
        
        
        <a href="./微信小程序/03-微信小程序配置-JSON.html" ><b>51.3</b> 微信小程序配置</a>
        
    </li>

                            
                                
    
    <li data-level="51.4" class="chapter" data-path="微信小程序/04-页面常用标签-WXML.html">
        
        
        <a href="./微信小程序/04-页面常用标签-WXML.html" ><b>51.4</b> 04-页面结构-WXML</a>
        
    </li>

                            
                                
    
    <li data-level="51.5" class="chapter" data-path="微信小程序/05-页面数据与函数-JS.html">
        
        
        <a href="./微信小程序/05-页面数据与函数-JS.html" ><b>51.5</b> 05-页面数据与函数-JS</a>
        
    </li>

                            
                                
    
    <li data-level="51.6" class="chapter" data-path="微信小程序/06-页面样式-WXSS.html">
        
        
        <a href="./微信小程序/06-页面样式-WXSS.html" ><b>51.6</b> 06-页面样式-WXSS</a>
        
    </li>

                            
                                
    
    <li data-level="51.7" class="chapter" data-path="微信小程序/07-页面整体WXML布局.html">
        
        
        <a href="./微信小程序/07-页面整体WXML布局.html" ><b>51.7</b> 07-页面整体WXML布局</a>
        
    </li>

                            
                                
    
    <li data-level="51.8" class="chapter" data-path="微信小程序/08-事件.html">
        
        
        <a href="./微信小程序/08-事件.html" ><b>51.8</b> 事件</a>
        
    </li>

                            
                                
    
    <li data-level="51.9" class="chapter" data-path="微信小程序/09-WXS脚本.html">
        
        
        <a href="./微信小程序/09-WXS脚本.html" ><b>51.9</b> WXS脚本</a>
        
    </li>

                            
                                
    
    <li data-level="51.10" class="chapter" data-path="微信小程序/10-小程序云开发.html">
        
        
        <a href="./微信小程序/10-小程序云开发.html" ><b>51.10</b> 10-小程序云开发</a>
        
    </li>

                            
                                
    
    <li data-level="51.11" class="chapter" data-path="微信小程序/11-小程序云开发-云数据库.html">
        
        
        <a href="./微信小程序/11-小程序云开发-云数据库.html" ><b>51.11</b> 11-小程序云开发-云数据库</a>
        
    </li>

                            
                        </ul>
                    
                
        
    </li>

            
        </ul>

    </div>

    <div class="book-body">
        <div class="body-inner">

            <div class="book-header" role="navigation">
                <h1>
                    <a href="./index.html" > php笔记2018</a>
                </h1>
            </div>

            <div tabindex="-1" class="page-wrapper">
                <div class="page-inner">
                    <h2 class="post_title"> 026.GD库的使用-图片处理及验证码 </h2>
                    <div class="post_body"> <p class="md_block">

<div class="toc"><ul>
<li>
<a href="#toc_0">026.GD库的使用-图片处理及验证码</a>
<ul>
<li>
<a href="#toc_1">使用GD库画图</a>
<ul>
<li>
<a href="#toc_2">GD库画图步骤:</a>
</li>
<li>
<a href="#toc_3">绘制基本图形</a>
</li>
<li>
<a href="#toc_4">画时钟(练习,用到初中数学知识函数)</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">设计验证码类</a>
</li>
<li>
<a href="#toc_6">图片背景管理(打开图片为画布进行处理,上面是创建画布)</a>
<ul>
<li>
<a href="#toc_7">测试画文字,万能的图片编程函数,初步实现水印效果.</a>
</li>
<li>
<a href="#toc_8">图片的缩放与剪切-重采样复:imagecopyresampled();</a>
</li>
</ul>
</li>
<li>
<a href="#toc_9">图片添加水印（文字水印,图片水印[透明度]）</a>
<ul>
<li>
<a href="#toc_10">文字水印-把文字写在画布上,参照验证码</a>
</li>
<li>
<a href="#toc_11">图片水印-把水印图片复制到画布上,参照背景管理</a>
</li>
</ul>
</li>
<li>
<a href="#toc_12">图片的旋转与翻转</a>
<ul>
<li>
<a href="#toc_13">图片旋转:imagerotate();参见最后图像处理类</a>
</li>
<li>
<a href="#toc_14">图片秋翻转:imagecopy();把图片行或列单像素复制到新画布,参照最后图像处理类</a>
</li>
</ul>
</li>
<li>
<a href="#toc_15">图像处理类</a>
</li>
</ul>
</li>
</ul>
</div>
</p>


<h2 id="toc_1">使用GD库画图</h2>

<h3 id="toc_2">GD库画图步骤:</h3>

<p class="md_block">
    <span class="md_line">1.创建画布  -&gt;  2.绘制图像 -&gt;  3输出图形 -&gt;  4释放资源</span>
</p>


<p class="md_block">
    <span class="md_line">1.创建画布<br /></span>
    <span class="md_line">imagecreatetruecolor — 新建一个真彩色图像<br /></span>
    <span class="md_line">imagecreate — 新建一个基于调色板的图像<br /></span>
    <span class="md_line">resource imagecreate ( int $x_size , int $y_size )<br /></span>
    <span class="md_line">imagecreate() 返回一个图像标识符，代表了一幅大小为 x_size 和 y_size 的空白图像。</span>
</p>


<p class="md_block">
    <span class="md_line">设置画布颜色:<br /></span>
    <span class="md_line">    imagecolorallocate — 为一幅图像分配颜色<br /></span>
    <span class="md_line">    int imagecolorallocate ( resource $image , int $red , int $green , int $blue )<br /></span>
    <span class="md_line">imagecolorallocate() 返回一个标识符，代表了由给定的 RGB 成分组成的颜色。red，green 和 blue 分别是所需要的颜色的红，绿，蓝成分。这些参数是 0 到 255 的整数或者十六进制的 0x00 到 0xFF。imagecolorallocate() 必须被调用以创建每一种用在 image 所代表的图像中的颜色。</span>
</p>


<p class="md_block">
    <span class="md_line">imagefill — 区域填充<br /></span>
    <span class="md_line">bool imagefill ( resource $image , int $x , int $y , int $color )<br /></span>
    <span class="md_line">imagefill() 在 image 图像的坐标 x，y（图像左上角为 0, 0）处用 color 颜色执行区域填充（即与 x, y 点颜色相同且相邻的点都会被填充）。</span>
</p>


<p class="md_block">
    <span class="md_line">2.绘制图像<br /></span>
    <span class="md_line">    imageline();//画线</span>
</p>


<p class="md_block">
    <span class="md_line">3输出图形<br /></span>
    <span class="md_line">    imagejpeg — 输出图象到浏览器或文件。<br /></span>
    <span class="md_line">    imagegif — 输出图象到浏览器或文件。<br /></span>
    <span class="md_line">    imagepng — 以 PNG 格式将图像输出到浏览器或文件<br /></span>
    <span class="md_line">    bool imagepng ( resource $image [, string $filename ] )</span>
</p>


<p class="md_block">
    <span class="md_line">4释放资源<br /></span>
    <span class="md_line">imagedestroy($img);</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//header(&quot;Content-Type:image/jpeg&quot;);</span>
    <span class="sd">/**</span>
<span class="sd">     * 1.创建画布  -&gt; 2.绘制图像 -&gt; 3.输出图形 -&gt;  4.释放资源</span>
<span class="sd">     * </span>
<span class="sd">     */</span>
     <span class="c1">//1.创建画布200*200</span>
     <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
     <span class="c1">//1.1设置画布背景颜色</span>
     <span class="nv">$white</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
     <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
     <span class="nv">$blue</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
     
     <span class="c1">//1.2填充布画</span>
     <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span>
     
     <span class="c1">//2.绘制图像</span>
     <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span><span class="c1">//画线</span>
     <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span><span class="c1">//画线</span>
     
     <span class="c1">//3输出图形</span>
     <span class="nb">imagejpeg</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;red.jpeg&quot;</span><span class="p">);</span><span class="c1">//保存</span>
     <span class="c1">//imagejpeg($img);//直接输出不知怎么显示</span>
     <span class="k">echo</span> <span class="s1">&#39;&lt;img src=&quot;red.jpeg&quot;/&gt;&#39;</span><span class="p">;</span>
     
     <span class="c1">//4.释放资源</span>
     <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_3">绘制基本图形</h3>

<p class="md_block">
    <span class="md_line">imagefill 区域填充<br /></span>
    <span class="md_line">imagesetpixel   画一个单一像素<br /></span>
    <span class="md_line">imageline    画一条线段<br /></span>
    <span class="md_line">imagerectangle  画一个矩形<br /></span>
    <span class="md_line">imagerectngle       用col颜色在image图像中画一个矩形<br /></span>
    <span class="md_line">imagefilldrectangle 画矩形并填充<br /></span>
    <span class="md_line">imagefilledrectangle 在image图像中画一个用color颜色填充了的矩形<br /></span>
    <span class="md_line">imageellipse    画一个椭圆.<br /></span>
    <span class="md_line">    imageellipse 在image所肛表的图像中画一个中心为cx的椭圆.<br /></span>
    <span class="md_line">imagefilledellipse  画一个填充椭圆<br /></span>
    <span class="md_line">    imagefilledellipse  在image所肛表的图像中画一个中心为cx的椭圆.</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span>    <span class="c1">//header(&quot;Content-Type:image/jpeg&quot;);</span>
    <span class="sd">/**</span>
<span class="sd">     * 1.创建画布    2.绘制图像   3.输出图形   4.释放资源</span>
<span class="sd">     * </span>
<span class="sd">     */</span>
     <span class="c1">//1.创建画布200*200</span>
     <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
     <span class="c1">//1.1设置画布背景颜色</span>
     <span class="nv">$white</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
     <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
     <span class="nv">$blue</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
     
     <span class="c1">//1.2填充布画</span>
     <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span>
     
     <span class="c1">//2.绘制图像</span>
     <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span><span class="c1">//画线</span>
     <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span><span class="c1">//画线</span>
     <span class="nb">imagerectangle</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">$white</span><span class="p">);</span><span class="c1">//画矩形</span>
     <span class="nb">imagefilledrectangle</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span><span class="c1">//画填充矩形</span>
     
     
     <span class="c1">//3输出图形</span>
     <span class="nb">imagejpeg</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;red.jpeg&quot;</span><span class="p">);</span><span class="c1">//保存</span>
     <span class="c1">//imagejpeg($img);//直接输出不知怎么显示</span>
     <span class="k">echo</span> <span class="s1">&#39;&lt;img src=&quot;red.jpeg&quot;/&gt;&#39;</span><span class="p">;</span>
     
     <span class="c1">//4.释放资源</span>
     <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<p class="md_block">
    <span class="md_line">练习第二次,用HTML加载PHP为图形</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nx">HTML内容</span><span class="o">:</span>
<span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
            <span class="nx">setInterval</span><span class="p">(</span>
                <span class="k">function</span><span class="p">(){</span>
                    <span class="nx">document</span><span class="o">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;img1&quot;</span><span class="p">)</span><span class="o">.</span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;test.php?rnd=&quot;</span><span class="o">+</span><span class="nx">Math</span><span class="o">.</span><span class="nx">random</span><span class="p">();</span>
                    <span class="c1">//alert(math.random());</span>
                <span class="p">},</span><span class="mi">1000</span>
            <span class="p">);</span>
        <span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;img1&quot;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">html</span><span class="o">&gt;</span>
</pre></div>

<!--block_code_end-->
<p class="md_block">
    <span class="md_line">php内容</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="nx">PHP内容</span><span class="o">:</span>
<span class="o">&lt;?</span><span class="nx">php</span>
<span class="cm">/*  header(&quot;Content-Type:text/html;charset=utf-8&quot;);</span>
<span class="cm"> * PHP用DG库画图</span>
<span class="cm"> */</span>
    <span class="c1">//新建画布</span>
    <span class="c1">//•imagecreate — 新建一个基于调色板的图像</span>
    <span class="c1">//imagecreatetruecolor(200, 200);//imagecreatetruecolor — 新建一个真彩色图像</span>
    <span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s2">&quot;PRC&quot;</span><span class="p">);</span>
    <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreate</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    
    <span class="c1">//设置画布颜色</span>
    <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nv">$blue</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    <span class="nv">$white</span>   <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span><span class="c1">//用16进制表示</span>
    <span class="nv">$green</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    
    <span class="c1">//填充画而</span>
    <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$blue</span><span class="p">);</span>
    
    <span class="c1">//画距形</span>
    <span class="nb">imagerectangle</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span><span class="c1">//画距形</span>
    <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">$white</span><span class="p">);</span><span class="c1">//填充距形(红边,白填充)</span>
    <span class="c1">//直接画填充距形</span>
    <span class="nb">imagefilledrectangle</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span>
    
    <span class="c1">//画圆</span>
    <span class="nb">imageellipse</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span><span class="c1">//画圆</span>
    <span class="nb">imagefilledellipse</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span><span class="c1">//画填充圆</span>
    
    <span class="c1">//画弧形</span>
    <span class="nb">imagearc</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="nv">$white</span><span class="p">);</span><span class="c1">//中心点 -- 宽高 -- 0-360度.</span>
    <span class="c1">//画字符串</span>
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span><span class="c1">//画水来字符串</span>
    <span class="nb">imagestringup</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="s2">&quot;HelloWorld&quot;</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span><span class="c1">//画垂直字符串</span>
    <span class="c1">//向图像写入文本:imagettftext    //转码:iconv($in_charset, $out_charset, $str)</span>
    <span class="nb">imagettftext</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="nv">$red</span><span class="p">,</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">WINDOWS</span><span class="se">\\</span><span class="s2">Fonts</span><span class="se">\\</span><span class="s2">SIMHEI.TTF&quot;</span><span class="p">,</span> <span class="nb">date</span><span class="p">(</span><span class="s1">&#39;H:i:s&#39;</span><span class="p">,</span><span class="nb">time</span><span class="p">()));</span><span class="c1">//资源,大小,角度,坐标X,坐标Y,颜色,字体路径,文字</span>
    
    <span class="nb">imagejpeg</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
<span class="cm">/*  //输出</span>
<span class="cm">    //imagejpeg($img,&quot;blue.jpg&quot;);</span>
<span class="cm">    imagejpeg($img);</span>
<span class="cm">    </span>
<span class="cm">    echo &#39;      &lt;script type=&quot;text/javascript&quot;&gt;</span>
<span class="cm">            setInterval(</span>
<span class="cm">                function(){</span>
<span class="cm">                    document.getElementById(&quot;img1&quot;).src=&quot;blue.jpg?&quot;+Math.round();</span>
<span class="cm">                    alert(document.getElementById(&quot;img1&quot;).src);</span>
<span class="cm">                },1000</span>
<span class="cm">            );</span>
<span class="cm">        &lt;/script&gt;&#39;;</span>

<span class="cm">    echo &#39;&lt;img id=img1 src=blue.jpg&gt;&#39;;*/</span>
    <span class="c1">//释放资源</span>
    <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_4">画时钟(练习,用到初中数学知识函数)</h3>
<div class="codehilite code_lang_html  highlight"><pre><span></span>HTML内容:
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="nx">setInterval</span><span class="p">(</span>
                <span class="kd">function</span><span class="p">(){</span>
                    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;img1&quot;</span><span class="p">).</span><span class="nx">src</span><span class="o">=</span><span class="s2">&quot;time.php?rnd=&quot;</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
                    <span class="c1">//alert(math.random());</span>
                <span class="p">},</span><span class="mi">1000</span>
            <span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;img1&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>

<!--block_code_end--><div class="codehilite code_lang_php  highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd">     * 画时间</span>
<span class="sd">     */</span>
     <span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s2">&quot;PRC&quot;</span><span class="p">);</span>
     <span class="nv">$H</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">,</span><span class="nb">time</span><span class="p">());</span>
     <span class="nv">$i</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span><span class="nb">time</span><span class="p">());</span>
     <span class="nv">$s</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span><span class="nb">time</span><span class="p">());</span>
    <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreate</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
    
    <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nv">$green</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nv">$white</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    <span class="nv">$blue</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    
    <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$white</span><span class="p">);</span><span class="c1">//填充白色</span>
    <span class="c1">//1.画圆</span>
    <span class="nb">imageellipse</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    <span class="nb">imagefilledellipse</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="nv">$green</span><span class="p">);</span>
    
    <span class="c1">//画秒针</span>
    <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="o">+</span><span class="nx">x1</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="mi">60</span><span class="p">),</span> <span class="mi">100</span><span class="o">+</span><span class="nx">y1</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="mi">60</span><span class="p">),</span> <span class="nv">$red</span><span class="p">);</span>
    <span class="c1">//imagettftext($img, 10, 0, 0, 0, $red, &quot;C:\\WINDOWS\\Fonts\\SIMHEI.TTF&quot;, date(&quot;H:i:s&quot;,time()));</span>
    <span class="c1">//画分针</span>
    <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="o">+</span><span class="nx">x1</span><span class="p">(</span><span class="nv">$i</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span> <span class="mi">100</span><span class="o">+</span><span class="nx">y1</span><span class="p">(</span><span class="nv">$i</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span> <span class="nv">$blue</span><span class="p">);</span>
    <span class="c1">//画时针</span>
    <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="o">+</span><span class="nx">x1H</span><span class="p">(</span><span class="nv">$H</span><span class="p">,</span><span class="mi">40</span><span class="p">),</span> <span class="mi">100</span><span class="o">+</span><span class="nx">y1H</span><span class="p">(</span><span class="nv">$H</span><span class="p">,</span><span class="mi">40</span><span class="p">),</span> <span class="nv">$red</span><span class="p">);</span>
    
    <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">date</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">$H</span><span class="s2">:i:s&quot;</span><span class="p">,</span><span class="nb">time</span><span class="p">()),</span> <span class="nv">$red</span><span class="p">);</span>
    <span class="sd">/**</span>
<span class="sd">     * 传秒数,得到X坐标</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">x1</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$len</span><span class="p">){</span>
        <span class="k">return</span> <span class="nv">$len</span> <span class="o">*</span> <span class="nb">cos</span><span class="p">(</span><span class="nb">pi</span><span class="p">()</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="p">(</span><span class="nv">$s</span><span class="o">*</span><span class="mi">6</span><span class="o">-</span><span class="mi">90</span><span class="p">));</span><span class="c1">//长度为60,秒数*6是角度,-90是3点方向为零度</span>
    <span class="p">}</span>
        <span class="k">function</span> <span class="nf">x1H</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$len</span><span class="p">){</span>
        <span class="k">global</span> <span class="nv">$i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nv">$len</span> <span class="o">*</span> <span class="nb">cos</span><span class="p">(</span><span class="nb">pi</span><span class="p">()</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="p">(</span><span class="nv">$s</span><span class="o">*</span><span class="mi">30</span><span class="o">-</span><span class="mi">90</span><span class="o">+</span><span class="nv">$i</span><span class="o">/</span><span class="mi">60</span><span class="o">*</span><span class="mi">30</span><span class="p">));</span><span class="c1">//长度为60,秒数*6是角度,-90是3点方向为零度</span>
    <span class="p">}</span>
    <span class="sd">/**</span>
<span class="sd">     * 传秒数,得到Y坐标</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">y1</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$len</span><span class="p">){</span>
        <span class="k">return</span> <span class="nv">$len</span> <span class="o">*</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">pi</span><span class="p">()</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="p">(</span><span class="nv">$s</span><span class="o">*</span><span class="mi">6</span><span class="o">-</span><span class="mi">90</span><span class="p">));</span><span class="c1">//长度为60,秒数*6是角度,-90是3点方向为零度</span>
    <span class="p">}</span>
    <span class="k">function</span> <span class="nf">y1H</span><span class="p">(</span><span class="nv">$s</span><span class="p">,</span><span class="nv">$len</span><span class="p">){</span>
        <span class="k">global</span> <span class="nv">$i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nv">$len</span> <span class="o">*</span> <span class="nb">sin</span><span class="p">(</span><span class="nb">pi</span><span class="p">()</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="p">(</span><span class="nv">$s</span><span class="o">*</span><span class="mi">30</span><span class="o">-</span><span class="mi">90</span><span class="o">+</span><span class="nv">$i</span><span class="o">/</span><span class="mi">60</span><span class="o">*</span><span class="mi">30</span><span class="p">));</span><span class="c1">//长度为60,秒数*6是角度,-90是3点方向为零度</span>
    <span class="p">}</span>
    <span class="c1">//imageline($img, 100, 100, 100, 40, $red);//零秒时秒针坐标100,40</span>
    <span class="c1">//圆点坐标：(x0,y0) </span>
    <span class="c1">//半径：r </span>
    <span class="c1">//角度：a0 </span>
    <span class="c1">//则圆上任一点为：（x1,y1） </span>
    <span class="c1">//x1   =   x0   +   r   *   cos(ao   *   3.14   /180   ) </span>
    <span class="c1">//y1   =   y0   +   r   *   sin(ao   *   3.14   /180   ) </span>
    <span class="nb">imagejpeg</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
    <span class="c1">//imagejpeg($img,&quot;red.jpg&quot;);</span>
    <span class="c1">//echo &#39;&lt;img src = red.jpg&gt;&lt;/img&gt;&#39;;</span>
    <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h2 id="toc_5">设计验证码类</h2>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="k">class</span> <span class="nc">Verify</span><span class="p">{</span>
    <span class="c1">//生成验证码用的字符串</span>
    <span class="k">private</span> <span class="nv">$verifystr</span> <span class="o">=</span> <span class="s1">&#39;3456789abcdefghijkmnqrstuvwxyABCDEFGHJKLMNPQRSTUVWXY&#39;</span><span class="p">;</span>
    <span class="c1">//生成图片的高度</span>
    <span class="k">private</span> <span class="nv">$width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="c1">//生成图片的宽度</span>
    <span class="k">private</span> <span class="nv">$height</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
    <span class="c1">//背景颜色</span>
    <span class="k">private</span> <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="s1">&#39;#fff&#39;</span><span class="p">;</span><span class="c1">//#ffffff</span>
    <span class="c1">//验证码位数</span>
    <span class="k">private</span> <span class="nv">$length</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="c1">//字体大小</span>
    <span class="k">private</span> <span class="nv">$fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
    <span class="c1">//画布</span>
    <span class="k">private</span> <span class="nv">$img</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
    
    <span class="c1">//设置私有成员属性</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">set_opt</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$val</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nb">get_class_vars</span><span class="p">(</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">)))){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$key</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//用数组设置成员属性</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">set_opt_array</span><span class="p">(</span><span class="nv">$arr</span><span class="p">){</span>
        <span class="k">foreach</span><span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="nv">$key</span><span class="o">=&gt;</span><span class="nv">$val</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nb">get_class_vars</span><span class="p">(</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">)))){</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$key</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">//处理背景颜色,把 #fef  #ffeeff变成一个RGB数组</span>
    <span class="k">private</span> <span class="k">function</span> <span class="nf">set_bgcolor</span><span class="p">(){</span>
        <span class="c1">//处理用户传过来的颜色</span>
        <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nb">ltrim</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">,</span><span class="s1">&#39;#&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">){</span>
            <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="o">.</span><span class="s1">&#39;000&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
        <span class="p">}</span><span class="k">elseif</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">){</span>
            <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="o">.</span><span class="s1">&#39;000&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//把三位变成六位颜色值</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">){</span>
            <span class="nv">$tempcolor</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                <span class="nv">$tempcolor</span> <span class="o">.=</span> <span class="nb">str_repeat</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">[</span><span class="nv">$i</span><span class="p">],</span><span class="mi">2</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nv">$tempcolor</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$arr</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            
            <span class="nv">$temp</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">,</span> <span class="nv">$i</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
            <span class="nv">$temp</span> <span class="o">=</span> <span class="s1">&#39;0x&#39;</span><span class="o">.</span><span class="nv">$temp</span><span class="p">;</span>
            <span class="nv">$arr</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hexdec</span><span class="p">(</span><span class="nv">$temp</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$arr</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nv">$arr</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nv">$arr</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="c1">//生成验证码....</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">echo_verify</span><span class="p">(</span><span class="nv">$session_var</span> <span class="o">=</span> <span class="s1">&#39;verify&#39;</span><span class="p">){</span>
        <span class="c1">//开启session,有可能在include的页面已经使用了session_start();所以要判断下   </span>
        <span class="k">if</span><span class="p">(</span><span class="nb">session_status</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">PHP_SESSION_ACTIVE</span><span class="p">)</span> <span class="nb">session_start</span><span class="p">();</span>
        <span class="c1">//设置头指定为图片</span>
        <span class="nb">header</span><span class="p">(</span><span class="s1">&#39;Content-Type:image/jpeg&#39;</span><span class="p">);</span>
        <span class="c1">//创建画布</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">);</span>
        <span class="c1">//填充背景色</span>
        <span class="nb">imagefill</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_bgcolor</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">));</span>
        
        <span class="c1">//画干扰(画雪花,画线条,事干扰字母)(干扰用浅色,验证码文本用深色)</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">),</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">)));</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            <span class="nb">imageline</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">),</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">)));</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">),</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">verifystr</span><span class="p">[</span><span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">verifystr</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="p">,</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">255</span><span class="p">)));</span>
        <span class="p">}</span>
        <span class="c1">//画验证码=============</span>
        <span class="c1">//从字体目录中随机取一个字体文件来用.</span>
        <span class="nv">$fonts</span> <span class="o">=</span> <span class="nb">glob</span><span class="p">(</span><span class="s1">&#39;fonts/*.ttf&#39;</span><span class="p">);</span>
        <span class="nv">$font</span> <span class="o">=</span> <span class="nv">$fonts</span><span class="p">[</span><span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$fonts</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)];</span>
        
        <span class="c1">//准备画验证码上去了....想法是字画布的宽度画满,每个字符占平均宽度.上下不对齐</span>
        <span class="c1">//生成验证码字符串</span>
        <span class="nv">$code</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$strlen</span> <span class="o">=</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">verifystr</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            <span class="nv">$code</span> <span class="o">.=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">verifystr</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$strlen</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//验证码有几个字符就画几次</span>
        <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
            <span class="c1">//每次画一个字</span>
            <span class="nv">$char</span> <span class="o">=</span> <span class="nv">$code</span><span class="p">[</span><span class="nv">$i</span><span class="p">];</span>
            <span class="nv">$charsize</span> <span class="o">=</span> <span class="nb">imagettfbbox</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fontsize</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$font</span><span class="p">,</span> <span class="nv">$char</span><span class="p">);</span>
            <span class="nv">$char_w</span> <span class="o">=</span> <span class="nv">$charsize</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$charsize</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="c1">//这个字符画上去的宽度</span>
            <span class="nv">$char_h</span> <span class="o">=</span> <span class="nv">$charsize</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$charsize</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="c1">//这个字符画上去的高度</span>
            <span class="c1">//每个字占的画布有多宽</span>
            <span class="nv">$imgwidth</span> <span class="o">=</span> <span class="nb">ceil</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">width</span> <span class="o">/</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span><span class="p">);</span><span class="c1">//得到每个字符要占画布的宽度</span>
            <span class="c1">//有时mt_rand的第二个参数小于了第一个参数，所以加上了max与min函数。</span>
            <span class="nb">imagettftext</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fontsize</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nv">$i</span><span class="o">*</span><span class="nv">$imgwidth</span><span class="p">,</span> <span class="p">(</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nv">$imgwidth</span><span class="o">-</span><span class="nv">$char_w</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="nv">$i</span><span class="o">*</span><span class="nv">$imgwidth</span><span class="p">,</span> <span class="p">(</span><span class="nv">$i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="nv">$imgwidth</span><span class="o">-</span><span class="nv">$char_w</span><span class="p">)),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nv">$char_h</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">),</span><span class="nb">max</span><span class="p">(</span><span class="nv">$char_h</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">height</span><span class="p">)),</span><span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="nb">mt_rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)),</span> <span class="nv">$font</span><span class="p">,</span> <span class="nv">$char</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">//把验证码写入SESSION</span>
        <span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$session_var</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$code</span><span class="p">;</span>
        <span class="nb">imagejpeg</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//验证码的验证方法....</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">verify_code1</span><span class="p">(</span><span class="nv">$verify</span><span class="p">,</span> <span class="nv">$session_var</span> <span class="o">=</span> <span class="s1">&#39;verify&#39;</span><span class="p">){</span>
        <span class="c1">//有可能已经在include的页面开使用了session_start(),所以要写个条件判断下    </span>
        <span class="k">if</span><span class="p">(</span><span class="nb">session_status</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">PHP_SESSION_ACTIVE</span><span class="p">)</span> <span class="nb">session_start</span><span class="p">();</span>
        <span class="nv">$flag</span> <span class="o">=</span> <span class="k">FALSE</span><span class="p">;</span>
        <span class="c1">//print_r($_SESSION);</span>
        <span class="k">if</span><span class="p">((</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$session_var</span><span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$verify</span><span class="p">)</span> <span class="o">==</span> <span class="nb">strtolower</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$session_var</span><span class="p">]))){</span>
            <span class="nv">$flag</span> <span class="o">=</span>  <span class="k">TRUE</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nb">unset</span><span class="p">(</span><span class="nv">$_SESSION</span><span class="p">[</span><span class="nv">$session_var</span><span class="p">]);</span>
        <span class="k">return</span> <span class="nv">$flag</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//使用:生成验证码===================================</span>
<span class="cm">/*include_once &#39;verify.class.php&#39;;</span>
<span class="cm">$verify = new Verify();</span>
<span class="cm">//设置是可选的,可以使用单个进行多次设置,也可以使用数组一次设置</span>
<span class="cm">//$verify-&gt;set_opt(&#39;width&#39;, 200);</span>
<span class="cm">//$verify-&gt;set_opt(&#39;height&#39;, 60);</span>
<span class="cm">//$verify-&gt;set_opt(&#39;fontsize&#39;, 30);</span>
<span class="cm">$verify-&gt;set_opt_array(</span>
<span class="cm">[&#39;length&#39;=&gt;4,&#39;width&#39;=&gt;200,&#39;height&#39;=&gt;60,&#39;verifystr&#39;=&gt;&#39;abcdefghijkmnqrstuvwxyABCDEFGHJKLMNPQRSTUVWXY&#39;]</span>
<span class="cm">);</span>
<span class="cm">$verify-&gt;echo_verify();*/</span>
<span class="c1">//在HTML页面:链接+随机数是为了解决浏览器缓存问题.让每次的值都不一样.</span>
<span class="c1">//&lt;img src=&quot;verify.php&quot; onclick=&quot;this.src=&#39;verify.php?&#39;+Math.random()&quot;/&gt;</span>
<span class="c1">//验证:验证验证码是否正确===============================================</span>
<span class="cm">/*include &#39;verify.class.php&#39;;</span>
<span class="cm">if(!empty($_POST[&#39;verify&#39;])){</span>
<span class="cm">    $verify = new Verify();</span>
<span class="cm">    //print_r($_SESSION);</span>
<span class="cm">    if($verify-&gt;verify_code1($_POST[&#39;verify&#39;])){</span>
<span class="cm">        echo &#39;验证码正确&#39;;</span>
<span class="cm">    }else{</span>
<span class="cm">        echo &#39;验证码出错&#39;;</span>
<span class="cm">    }</span>
<span class="cm">}else{</span>
<span class="cm">    echo &#39;非法操作&#39;;</span>
<span class="cm">}*/</span>
</pre></div>

<!--block_code_end-->
<h2 id="toc_6">图片背景管理(打开图片为画布进行处理,上面是创建画布)</h2>

<p class="md_block">
    <span class="md_line">实例练习</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span>    <span class="cm">/*</span>
<span class="cm">    $img = imagecreatefromgif($filename);//以现有图片资源作为背景在上面画图</span>
<span class="cm">    $img = imagecreatefromjpeg($filename);</span>
<span class="cm">    $img = imagecreatefrompng($filename);</span>
<span class="cm">    $img = imagecreatefromwbmp($filename);</span>
<span class="cm">    //获取图片宽度</span>
<span class="cm">    $imgwidth = imagesx($img);</span>
<span class="cm">    //获取图片高度</span>
<span class="cm">    $imgheight = imagesy($img);</span>
<span class="cm">    //获取图片大小,类型等信息  //1=GIF，2=JPG，3=PNG</span>
<span class="cm">    array getimagesize($filename);</span>
<span class="cm">     */</span>
     <span class="c1">//下句输出:Array ( [0] =&gt; 128 [1] =&gt; 128 [2] =&gt; 3 [3] =&gt; width=&quot;128&quot; height=&quot;128&quot; [bits] =&gt; 8 [mime] =&gt; image/png )</span>
     <span class="nb">print_r</span><span class="p">(</span><span class="nb">getimagesize</span><span class="p">(</span><span class="s2">&quot;xl1.png&quot;</span><span class="p">));</span>
     
     <span class="c1">//打开一张图片作业背景,开始在上面画一条直线.</span>
     <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreatefrompng</span><span class="p">(</span><span class="s2">&quot;./xl.png&quot;</span><span class="p">);</span>
     <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
     <span class="nb">imageline</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$img</span><span class="p">),</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$img</span><span class="p">),</span> <span class="nv">$red</span><span class="p">);</span>
     <span class="nb">imagepng</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;xl1.png&quot;</span><span class="p">);</span>
     <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_7">测试画文字,万能的图片编程函数,初步实现水印效果.</h3>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="c1">//测试画文字,万能的图片编程函数</span>
     <span class="nx">cimgstr</span><span class="p">(</span><span class="s2">&quot;./xl.png&quot;</span><span class="p">,</span> <span class="s2">&quot;kunpeng.com&quot;</span><span class="p">);</span>
     <span class="c1">//万能的打开图片编辑后再保存函数</span>
     <span class="k">function</span> <span class="nf">cimgstr</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nv">$strs</span><span class="p">){</span>
        <span class="c1">//获取图片高度,宽度,类型(1=GIF，2=JPG，3=PNG)</span>
        <span class="k">list</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span><span class="nv">$height</span><span class="p">,</span><span class="nv">$size</span><span class="p">)</span> <span class="o">=</span> <span class="nb">getimagesize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
        <span class="c1">//打开图片,用到变量函数,把变量值作为函数:变量名(参数);</span>
        <span class="nv">$sizearr</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;gif&quot;</span><span class="p">,</span><span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;jpeg&quot;</span><span class="p">,</span><span class="mi">3</span><span class="o">=&gt;</span><span class="s2">&quot;png&quot;</span><span class="p">);</span>
        <span class="nv">$imgstr</span> <span class="o">=</span> <span class="s2">&quot;imagecreatefrom&quot;</span><span class="o">.</span><span class="nv">$sizearr</span><span class="p">[</span><span class="nv">$size</span><span class="p">];</span>
        <span class="nv">$img</span> <span class="o">=</span> <span class="nv">$imgstr</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
        <span class="nv">$red</span> <span class="o">=</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nb">imagestring</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$img</span><span class="p">)</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="nv">$strs</span><span class="p">,</span> <span class="nv">$red</span><span class="p">);</span><span class="c1">//使用内置字体,只限1-5号大小.</span>
        <span class="nv">$imagestr</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="o">.</span><span class="nv">$sizearr</span><span class="p">[</span><span class="nv">$size</span><span class="p">];</span>
        <span class="nv">$imagestr</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;a_&quot;</span><span class="o">.</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$filename</span><span class="p">));</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>     
     <span class="p">}</span>
</pre></div>

<!--block_code_end-->
<h3 id="toc_8">图片的缩放与剪切-重采样复:imagecopyresampled();</h3>
<div class="codehilite code_lang_php  highlight"><pre><span></span><span class="sd">/**</span>
<span class="sd"> * 缩放复制,剪切图片</span>
<span class="sd"> */</span>
    <span class="k">function</span> <span class="nf">copyimg</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nv">$width</span><span class="p">,</span><span class="nv">$height</span><span class="p">){</span>
        <span class="k">list</span><span class="p">(</span><span class="nv">$w</span><span class="p">,</span><span class="nv">$h</span><span class="p">,</span><span class="nv">$type</span><span class="p">)</span> <span class="o">=</span> <span class="nb">getimagesize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//获取原图片宽,高,类型</span>
        <span class="nv">$types</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;gif&quot;</span><span class="p">,</span><span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;jpeg&quot;</span><span class="p">,</span><span class="mi">3</span><span class="o">=&gt;</span><span class="s2">&quot;png&quot;</span><span class="p">];</span>
        <span class="c1">//print_r($types);</span>
        <span class="nv">$imgsrcstr</span> <span class="o">=</span> <span class="s2">&quot;imagecreatefrom&quot;</span><span class="o">.</span><span class="nv">$types</span><span class="p">[</span><span class="nv">$type</span><span class="p">];</span>
        <span class="nv">$imgsrc</span> <span class="o">=</span> <span class="nv">$imgsrcstr</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//原图片资源</span>
        
        <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span><span class="c1">//新图片资源</span>
        <span class="c1">//等比列缩放</span>
        <span class="nv">$width</span> <span class="o">=</span> <span class="nv">$width</span><span class="o">/</span><span class="nv">$w</span><span class="o">*</span><span class="nv">$w</span><span class="p">;</span>
        <span class="nv">$height</span> <span class="o">=</span> <span class="nv">$width</span><span class="o">/</span><span class="nv">$w</span><span class="o">*</span><span class="nv">$h</span><span class="p">;</span>
        
        <span class="c1">//目标图片,原图片,目标坐标XY,原图坐标XY,目标宽高,原图宽高</span>
        <span class="nb">imagecopyresampled</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="nv">$imgsrc</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">,</span> <span class="nv">$w</span><span class="p">,</span> <span class="nv">$h</span><span class="p">);</span>
        <span class="c1">//输出图片</span>
        <span class="nv">$newimgstr</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="o">.</span><span class="nv">$types</span><span class="p">[</span><span class="nv">$type</span><span class="p">];</span>
        <span class="nv">$newimgstr</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;new_&quot;</span><span class="o">.</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$filename</span><span class="p">));</span>
        <span class="c1">//释放资源</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$imgsrc</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="sd">/**</span>
<span class="sd">     * 剪切图片</span>
<span class="sd">     */</span>
    <span class="k">function</span> <span class="nf">cutimg</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nv">$width</span><span class="p">,</span><span class="nv">$height</span><span class="p">){</span>
        <span class="k">list</span><span class="p">(</span><span class="nv">$w</span><span class="p">,</span><span class="nv">$h</span><span class="p">,</span><span class="nv">$type</span><span class="p">)</span> <span class="o">=</span> <span class="nb">getimagesize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//获取原图片宽,高,类型</span>
        <span class="nv">$types</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">&quot;gif&quot;</span><span class="p">,</span><span class="mi">2</span><span class="o">=&gt;</span><span class="s2">&quot;jpeg&quot;</span><span class="p">,</span><span class="mi">3</span><span class="o">=&gt;</span><span class="s2">&quot;png&quot;</span><span class="p">];</span>
        <span class="c1">//print_r($types);</span>
        <span class="nv">$imgsrcstr</span> <span class="o">=</span> <span class="s2">&quot;imagecreatefrom&quot;</span><span class="o">.</span><span class="nv">$types</span><span class="p">[</span><span class="nv">$type</span><span class="p">];</span>
        <span class="nv">$imgsrc</span> <span class="o">=</span> <span class="nv">$imgsrcstr</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//原图片资源</span>
        
        <span class="nv">$img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span><span class="c1">//新图片资源</span>
        <span class="c1">//目标图片,原图片,目标坐标XY,原图坐标XY,目标宽高,原图宽高</span>
        <span class="nb">imagecopyresampled</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span> <span class="nv">$imgsrc</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">,</span> <span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span>
        <span class="c1">//输出图片</span>
        <span class="nv">$newimgstr</span> <span class="o">=</span> <span class="s2">&quot;image&quot;</span><span class="o">.</span><span class="nv">$types</span><span class="p">[</span><span class="nv">$type</span><span class="p">];</span>
        <span class="nv">$newimgstr</span><span class="p">(</span><span class="nv">$img</span><span class="p">,</span><span class="s2">&quot;new_&quot;</span><span class="o">.</span><span class="nb">basename</span><span class="p">(</span><span class="nv">$filename</span><span class="p">));</span>
        <span class="c1">//释放资源</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$img</span><span class="p">);</span>
        <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$imgsrc</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//copyimg(&quot;timeok.jpg&quot;,200,200);</span>
    <span class="nx">cutimg</span><span class="p">(</span><span class="s2">&quot;timeok.jpg&quot;</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>

<!--block_code_end-->
<h2 id="toc_9">图片添加水印（文字水印,图片水印[透明度]）</h2>

<h3 id="toc_10">文字水印-把文字写在画布上,参照验证码</h3>

<h3 id="toc_11">图片水印-把水印图片复制到画布上,参照背景管理</h3>

<h2 id="toc_12">图片的旋转与翻转</h2>

<h3 id="toc_13">图片旋转:imagerotate();参见最后图像处理类</h3>

<h3 id="toc_14">图片秋翻转:imagecopy();把图片行或列单像素复制到新画布,参照最后图像处理类</h3>

<h2 id="toc_15">图像处理类</h2>
<div class="codehilite code_lang_php  highlight"><pre><span></span>    <span class="k">class</span> <span class="nc">MyGD</span><span class="p">{</span>
        <span class="k">private</span> <span class="nv">$imgtypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;png&#39;</span><span class="p">];</span><span class="c1">//图片的类类集合</span>
        <span class="k">private</span> <span class="nv">$msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span><span class="c1">//错误信息</span>
        
        <span class="k">private</span> <span class="nv">$img</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>    <span class="c1">//画布_输出的</span>
        <span class="k">private</span> <span class="nv">$img_temp</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span><span class="c1">//画布,临时画布</span>
        
        <span class="sd">/**</span>
<span class="sd">         * 析构方法:记得操作完成了在对象释放时,同时释放两个画布</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">__destruct</span><span class="p">(){</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">))</span> <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">))</span> <span class="nb">imagedestroy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span>
        <span class="p">}</span>
        
        
        <span class="sd">/**</span>
<span class="sd">         * 图片旋转</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">rotate</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nv">$angle</span><span class="p">,</span><span class="nv">$backcolor</span><span class="o">=</span><span class="s1">&#39;#ffffff&#39;</span><span class="p">,</span><span class="nv">$save_filename</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
            <span class="nv">$color</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">(</span><span class="nv">$backcolor</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span> <span class="o">=</span> <span class="nb">imagerotate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$angle</span><span class="p">,</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nv">$color</span><span class="p">[</span><span class="mi">2</span><span class="p">]));</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$save_filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
                <span class="nv">$tempname</span> <span class="o">=</span> <span class="nv">$filename</span><span class="p">;</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$tempname</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$save_filename</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="sd">/**</span>
<span class="sd">         * 图片翻转</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">reverse</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">,</span> <span class="nv">$save_filename</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">){</span>
            <span class="c1">//header(&#39;content-type:image/jpeg&#39;);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span>
            <span class="nv">$temp_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span>
            <span class="nv">$temp_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="nv">$temp_w</span><span class="p">,</span> <span class="nv">$temp_h</span><span class="p">);</span><span class="c1">//新画布</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
                <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$temp_w</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                    <span class="nb">imagecopy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$temp_w</span><span class="o">-</span><span class="nv">$i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">$temp_h</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="nv">$temp_h</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                    <span class="nb">imagecopy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$temp_h</span><span class="o">-</span><span class="nv">$i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$i</span><span class="p">,</span> <span class="nv">$temp_w</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="c1">//imagejpeg($this-&gt;img);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$save_filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
                <span class="nv">$tempname</span> <span class="o">=</span> <span class="nv">$filename</span><span class="p">;</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$tempname</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$save_filename</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        
        
        <span class="sd">/**</span>
<span class="sd">         * 图片水印:</span>
<span class="sd">         * 注意:PNG以外的格式,还要考滤透明度.</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">img_seal</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="nv">$seal_filename</span><span class="p">,</span> <span class="nv">$position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nv">$alpha</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nv">$save_filename</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">){</span>
            <span class="c1">//header(&#39;content-type:image/jpeg&#39;);    </span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//$this-&gt;img</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$seal_filename</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">);</span><span class="c1">//$this-&gt;img_temp</span>
            <span class="nv">$seal_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span><span class="c1">//水印图片宽度</span>
            <span class="nv">$seal_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span><span class="c1">//水印图片高度</span>
            <span class="nv">$img_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span><span class="c1">//图片宽度</span>
            <span class="nv">$img_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span><span class="c1">//图片高度</span>
            <span class="c1">//imagecopy($img, $temp, 0, 0, 0, 0, imagesx($temp), imagesy($temp));//支持背景透明,打PNG格式水印</span>
            <span class="c1">//imagecopymerge($img, $temp, 0, 0, 0, 0, imagesx($temp), imagesy($temp), 100);//不支持背景透明.可以设置透明度,打不是PNG格式水印</span>
            <span class="k">switch</span><span class="p">(</span><span class="nv">$position</span><span class="p">){</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$seal_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$seal_h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span><span class="o">-</span><span class="nv">$seal_h</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$seal_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span><span class="o">-</span><span class="nv">$seal_h</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">-</span> <span class="nv">$seal_w</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span><span class="o">-</span><span class="nv">$seal_h</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">-</span> <span class="nv">$seal_w</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$seal_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="k">if</span><span class="p">(</span><span class="nv">$alpha</span> <span class="o">==</span> <span class="mi">100</span><span class="p">){</span>
                <span class="nb">imagecopy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$seal_w</span><span class="p">,</span> <span class="nv">$seal_h</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="nb">imagecopymerge</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$seal_w</span><span class="p">,</span> <span class="nv">$seal_h</span><span class="p">,</span> <span class="nv">$alpha</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="c1">//imagejpeg($this-&gt;img);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$save_filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
                <span class="nv">$tempname</span> <span class="o">=</span> <span class="nv">$filename</span><span class="p">;</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$tempname</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$save_filename</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="sd">/**</span>
<span class="sd">         * 文字水印</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">text_seal</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nv">$text</span><span class="p">,</span><span class="nv">$position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nv">$save_filename</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nv">$fontfile</span><span class="o">=</span><span class="s1">&#39;fonts/STXINGKA.TTF&#39;</span> <span class="p">,</span><span class="nv">$fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="nv">$color</span><span class="o">=</span><span class="s1">&#39;#ffffff&#39;</span><span class="p">){</span>
            <span class="c1">//header(&#39;content-type:image/jpeg&#39;);    </span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
            <span class="nv">$textsize</span> <span class="o">=</span> <span class="nb">imagettfbbox</span><span class="p">(</span><span class="nv">$fontsize</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$fontfile</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span><span class="c1">//得到数组</span>
            <span class="nv">$text_w</span> <span class="o">=</span> <span class="nv">$textsize</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$textsize</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="c1">//文字画上去所占宽度</span>
            <span class="nv">$text_h</span> <span class="o">=</span> <span class="nv">$textsize</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="nv">$textsize</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="c1">//文字画上去所占高度</span>
            <span class="nv">$img_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span><span class="c1">//图片宽度</span>
            <span class="nv">$img_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span><span class="c1">//图片高度</span>
            <span class="nv">$padding</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
            <span class="k">switch</span><span class="p">(</span><span class="nv">$position</span><span class="p">){</span>
                <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$text_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nv">$text_h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$text_h</span> <span class="o">+</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">-</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$text_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">-</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">-</span> <span class="nv">$text_w</span> <span class="o">-</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">-</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">-</span> <span class="nv">$text_w</span> <span class="o">-</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$text_h</span> <span class="o">+</span> <span class="nv">$padding</span><span class="p">;</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
                    <span class="nv">$x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$text_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$y</span> <span class="o">=</span> <span class="nv">$text_h</span> <span class="o">+</span> <span class="nv">$padding</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nb">imagettftext</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$fontsize</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$x</span><span class="p">,</span> <span class="nv">$y</span><span class="p">,</span> <span class="nb">imagecolorallocate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">(</span><span class="nv">$color</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">(</span><span class="nv">$color</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bgcolor</span><span class="p">(</span><span class="nv">$color</span><span class="p">)[</span><span class="mi">2</span><span class="p">]),</span> <span class="nv">$fontfile</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
            <span class="c1">//imagejpeg($this-&gt;img);</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$save_filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
                <span class="nv">$tempname</span> <span class="o">=</span> <span class="nv">$filename</span><span class="p">;</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$tempname</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$save_filename</span><span class="p">);</span>
            <span class="p">}</span>
            
            
        <span class="p">}</span>
        
        <span class="sd">/**</span>
<span class="sd">         * 处理颜色,把#fff 或 #ffffff的代码转成数组array(255,255,255)</span>
<span class="sd">         * </span>
<span class="sd">         */</span>
        <span class="k">private</span> <span class="k">function</span> <span class="nf">bgcolor</span><span class="p">(</span><span class="nv">$color</span><span class="p">){</span>
            <span class="c1">//$this-&gt;bgcolor;</span>
            <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nb">ltrim</span><span class="p">(</span><span class="nv">$color</span><span class="p">,</span><span class="s1">&#39;#&#39;</span><span class="p">);</span><span class="c1">//去掉左边#</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">){</span>
                <span class="nv">$bgtemp</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
                <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                    <span class="nv">$bgtemp</span> <span class="o">.=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">,</span> <span class="nv">$i</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">,</span> <span class="nv">$i</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="c1">//echo $bgtemp;</span>
                <span class="nv">$bgcolor</span> <span class="o">=</span> <span class="nv">$bgtemp</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$arr</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
                <span class="nv">$temp</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$bgcolor</span><span class="p">,</span> <span class="nv">$i</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
                <span class="nv">$temp</span> <span class="o">=</span> <span class="s1">&#39;0x&#39;</span><span class="o">.</span><span class="nv">$temp</span><span class="p">;</span>
                <span class="nv">$arr</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">hexdec</span><span class="p">(</span><span class="nv">$temp</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nv">$arr</span><span class="p">;</span>
        <span class="p">}</span>
        
        
        
        <span class="sd">/**</span>
<span class="sd">         * 重新设置大小(调整大小,生成缩略图....)</span>
<span class="sd">         * @param $filename int 文件路径</span>
<span class="sd">         * @param $width int 缩放到指定宽度(像数)</span>
<span class="sd">         * @param $height int 缩放到指定高度(像数)</span>
<span class="sd">         * @param $mode 缩放模式 1.宽高都适应,2.宽度适应,3.高度适应</span>
<span class="sd">         * @param $position 如果$mode用2或3模式时生效,就是原图片如果需要裁剪时,裁剪哪个位置(1上或右,2中,3下或右)</span>
<span class="sd">         * @param $save_filename 缩放后保存到哪(路径带文件名),如果留空则用原:文件名_min.扩展名</span>
<span class="sd">         * @return 成功返回true,不成功返回false</span>
<span class="sd">         */</span>
        <span class="k">function</span> <span class="nf">resize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">,</span> <span class="nv">$mode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="nv">$position</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="nv">$save_filename</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="k">FALSE</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span> <span class="o">=</span> <span class="nb">imagecreatetruecolor</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span>
                <span class="nv">$img_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span>
                <span class="nv">$img_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">);</span>
                <span class="nv">$img_temp_w</span> <span class="o">=</span> <span class="nb">imagesx</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span>
                <span class="nv">$img_temp_h</span> <span class="o">=</span> <span class="nb">imagesy</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">);</span>
            
            <span class="k">if</span><span class="p">(</span><span class="nv">$mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
                <span class="c1">//留空白的处理方式(居中显示)=====================================</span>
                <span class="k">if</span><span class="p">(</span><span class="nv">$img_temp_w</span> <span class="o">/</span> <span class="nv">$img_temp_h</span>  <span class="o">&gt;</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="nv">$img_h</span><span class="p">){</span>
                    <span class="c1">//宽度填充满,高度有空白.新图片的高度有空白,新图片填充高度 = 新宽度/源宽度 * 源高度</span>
                    <span class="c1">//加代码让它居中(垂直居中,起始坐标Y = 大图高度/2 - 小图高度/2)</span>
                    <span class="nv">$img_min_w</span> <span class="o">=</span> <span class="nv">$img_w</span><span class="p">;</span>
                    <span class="nv">$img_min_h</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="nv">$img_temp_w</span> <span class="o">*</span> <span class="nv">$img_temp_h</span><span class="p">;</span><span class="c1">//实际填充高度(小图高度)</span>
                    <span class="nv">$img_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nv">$img_y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$img_min_h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="c1">//加代码让它居中(水平居中,起始坐标X = 大图宽度/2 - 小图宽度/2)</span>
                    <span class="nv">$img_min_w</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="nv">$img_temp_h</span> <span class="o">*</span> <span class="nv">$img_temp_w</span><span class="p">;</span>
                    <span class="nv">$img_min_h</span> <span class="o">=</span> <span class="nv">$img_h</span><span class="p">;</span>
                    <span class="nv">$img_x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nv">$img_min_w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$img_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nb">imagecopyresampled</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">,</span> <span class="nv">$img_x</span><span class="p">,</span> <span class="nv">$img_y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$img_min_w</span><span class="p">,</span> <span class="nv">$img_min_h</span><span class="p">,</span> <span class="nv">$img_temp_w</span><span class="p">,</span> <span class="nv">$img_temp_h</span><span class="p">);</span>
                                
            <span class="p">}</span><span class="k">elseif</span><span class="p">(</span><span class="nv">$mode</span> <span class="o">==</span> <span class="mi">2</span><span class="p">){</span>
                <span class="c1">//功能未完成,1.在裁剪时没有指定裁剪哪个位置都是左上角,2.如果有空白时居中</span>
                <span class="c1">//imagecopyresampled($dst_image, $src_image, $dst_x, $dst_y, $src_x, $src_y, $dst_w, $dst_h, $src_w, $src_h)</span>
                
                <span class="nv">$temp_wh</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="nv">$img_temp_w</span><span class="p">;</span><span class="c1">//缩放比例:宽度适应,高度计算</span>
                <span class="nv">$dst_image</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">;</span>
                <span class="nv">$src_image</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">;</span>
                <span class="nv">$dst_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$dst_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$src_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$src_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$dst_w</span> <span class="o">=</span> <span class="nv">$img_w</span><span class="p">;</span>
                <span class="nv">$dst_h</span> <span class="o">=</span> <span class="nv">$img_temp_h</span> <span class="o">*</span> <span class="nv">$temp_wh</span><span class="p">;</span>
                <span class="nv">$src_w</span> <span class="o">=</span> <span class="nv">$img_temp_w</span><span class="p">;</span>
                <span class="nv">$src_h</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="nv">$temp_wh</span><span class="p">;</span><span class="c1">//新图高度 / 宽/高比例</span>
                
                <span class="k">if</span><span class="p">(</span><span class="nv">$img_temp_w</span> <span class="o">/</span> <span class="nv">$img_temp_h</span>  <span class="o">&gt;</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="nv">$img_h</span><span class="p">){</span>
                    <span class="nv">$dst_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                    <span class="nv">$dst_y</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span>  <span class="nv">$img_temp_h</span> <span class="o">*</span> <span class="nv">$temp_wh</span><span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    
                    <span class="k">switch</span><span class="p">(</span><span class="nv">$position</span><span class="p">){</span>
                        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                            <span class="nv">$src_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//裁剪顶部</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                            <span class="nv">$src_y</span> <span class="o">=</span> <span class="nv">$img_temp_h</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nv">$src_h</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="c1">//裁剪中间</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                            <span class="nv">$src_y</span> <span class="o">=</span> <span class="nv">$img_temp_h</span> <span class="o">-</span> <span class="nv">$src_h</span><span class="p">;</span><span class="c1">//裁剪底部</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nb">imagecopyresampled</span><span class="p">(</span><span class="nv">$dst_image</span><span class="p">,</span> <span class="nv">$src_image</span><span class="p">,</span> <span class="nv">$dst_x</span><span class="p">,</span> <span class="nv">$dst_y</span><span class="p">,</span> <span class="nv">$src_x</span><span class="p">,</span> <span class="nv">$src_y</span><span class="p">,</span> <span class="nv">$dst_w</span><span class="p">,</span> <span class="nv">$dst_h</span><span class="p">,</span> <span class="nv">$src_w</span><span class="p">,</span> <span class="nv">$src_h</span><span class="p">);</span>
                <span class="c1">//imagecopyresampled($this-&gt;img, $this-&gt;img_temp, 0, 0, 0, 0, imagesx($this-&gt;img), imagesx($this-&gt;img) / imagesx($this-&gt;img_temp) * imagesy($this-&gt;img_temp), imagesx($this-&gt;img_temp), imagesy($this-&gt;img_temp));</span>
            <span class="p">}</span><span class="k">elseif</span><span class="p">(</span><span class="nv">$mode</span> <span class="o">==</span> <span class="mi">3</span><span class="p">){</span>
                <span class="c1">//功能未完成,1.在裁剪时没有指定裁剪哪个位置都是左上角,2.如果有空白时居中</span>
                <span class="nv">$temp_wh</span> <span class="o">=</span> <span class="nv">$img_h</span> <span class="o">/</span> <span class="nv">$img_temp_h</span><span class="p">;</span><span class="c1">//缩放比例:宽度适应,高度计算</span>
                <span class="nv">$dst_image</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">;</span>
                <span class="nv">$src_image</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span><span class="p">;</span>
                <span class="nv">$dst_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$dst_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$src_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$src_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="nv">$dst_w</span> <span class="o">=</span> <span class="nv">$img_w</span><span class="p">;</span>
                <span class="nv">$dst_h</span> <span class="o">=</span> <span class="nv">$img_h</span><span class="p">;</span>
                <span class="nv">$src_w</span> <span class="o">=</span> <span class="nv">$img_w</span><span class="o">/</span><span class="nv">$temp_wh</span><span class="p">;</span>
                <span class="nv">$src_h</span> <span class="o">=</span> <span class="nv">$img_temp_h</span><span class="p">;</span>
                
                <span class="k">if</span><span class="p">(</span><span class="nv">$img_temp_w</span> <span class="o">/</span> <span class="nv">$img_temp_h</span>  <span class="o">&lt;</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="nv">$img_h</span><span class="p">){</span>
                    <span class="nv">$dst_x</span> <span class="o">=</span> <span class="nv">$img_w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span>  <span class="nv">$img_temp_w</span> <span class="o">*</span> <span class="nv">$temp_wh</span><span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
                    <span class="nv">$dst_y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                    <span class="k">switch</span><span class="p">(</span><span class="nv">$position</span><span class="p">){</span>
                        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
                            <span class="nv">$src_x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="c1">//裁剪左部</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
                            <span class="nv">$src_x</span> <span class="o">=</span> <span class="nv">$img_temp_w</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="nv">$src_w</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span><span class="c1">//裁剪中间</span>
                            <span class="k">break</span><span class="p">;</span>
                        <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
                            <span class="nv">$src_x</span> <span class="o">=</span> <span class="nv">$img_temp_w</span> <span class="o">-</span> <span class="nv">$src_w</span><span class="p">;</span><span class="c1">//裁剪底部</span>
                            <span class="k">break</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
                <span class="nb">imagecopyresampled</span><span class="p">(</span><span class="nv">$dst_image</span><span class="p">,</span> <span class="nv">$src_image</span><span class="p">,</span> <span class="nv">$dst_x</span><span class="p">,</span> <span class="nv">$dst_y</span><span class="p">,</span> <span class="nv">$src_x</span><span class="p">,</span> <span class="nv">$src_y</span><span class="p">,</span> <span class="nv">$dst_w</span><span class="p">,</span> <span class="nv">$dst_h</span><span class="p">,</span> <span class="nv">$src_w</span><span class="p">,</span> <span class="nv">$src_h</span><span class="p">);</span>
                
                
                <span class="c1">//imagecopyresampled($this-&gt;img, $this-&gt;img_temp, 0, 0, 0, 0, imagesy($this-&gt;img) / imagesy($this-&gt;img_temp) * imagesx($this-&gt;img_temp), imagesy($this-&gt;img), imagesx($this-&gt;img_temp), imagesy($this-&gt;img_temp));</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$save_filename</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">){</span>
                <span class="c1">//在原文件名后加个_min.xxx</span>
                <span class="nv">$dirname</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
                <span class="nv">$name</span>  <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nx">PATHINFO_FILENAME</span><span class="p">);</span>
                <span class="nv">$ext</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nx">PATHINFO_EXTENSION</span><span class="p">);</span>
                <span class="nv">$tempname</span> <span class="o">=</span> <span class="nv">$dirname</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span> <span class="o">.</span> <span class="nv">$name</span> <span class="o">.</span> <span class="s1">&#39;_min.&#39;</span> <span class="o">.</span> <span class="nv">$ext</span><span class="p">;</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$tempname</span><span class="p">);</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$save_filename</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="sd">/**</span>
<span class="sd">         * 打开图片为画布</span>
<span class="sd">         * @param $filename string 文件的绝对路径或相对路径.</span>
<span class="sd">         * @return 如果成功则返回有效的画布,文件如果不存在或类型不对则返回FALSE;</span>
<span class="sd">         */</span>
        <span class="k">private</span> <span class="k">function</span> <span class="nf">open</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span> <span class="nv">$flag</span> <span class="o">=</span> <span class="k">TRUE</span><span class="p">){</span>
            <span class="c1">//文件不存在,返回false</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$filename</span><span class="p">)){</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">msg</span> <span class="o">=</span> <span class="s2">&quot;试着打开图片,但文件不存在!&quot;</span><span class="p">;</span>
                <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
            <span class="p">}</span> 
            <span class="c1">//先获取类型</span>
            <span class="nv">$imginfo</span> <span class="o">=</span> <span class="nb">getimagesize</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span>
            <span class="c1">//如果类型不是规定的图片类型,也直接返回false</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="nv">$imginfo</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">imgtypes</span><span class="p">)){</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">msg</span> <span class="o">=</span> <span class="s2">&quot;试着打开图片,但文件类型不是我们规定的图片类型!&quot;</span><span class="p">;</span>
                <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
            <span class="p">}</span> 
            <span class="nv">$imgtype</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">imgtypes</span><span class="p">[</span><span class="nv">$imginfo</span><span class="p">[</span><span class="mi">2</span><span class="p">]];</span>    <span class="c1">//jpeg</span>
            <span class="c1">//各种图片文件用相应的函数打开</span>
            <span class="nv">$cname</span> <span class="o">=</span> <span class="s1">&#39;imagecreatefrom&#39;</span><span class="o">.</span><span class="nv">$imgtype</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$flag</span><span class="p">)</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span> <span class="o">=</span> <span class="nv">$cname</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//画布</span>
            <span class="k">else</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img_temp</span> <span class="o">=</span> <span class="nv">$cname</span><span class="p">(</span><span class="nv">$filename</span><span class="p">);</span><span class="c1">//画布</span>
            <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
            
        <span class="p">}</span>
        <span class="sd">/**</span>
<span class="sd">         * 保存画布到文件</span>
<span class="sd">         * @param $filename 带有效路径的文件名</span>
<span class="sd">         * @return 成功返回true,失败返回false</span>
<span class="sd">         */</span>
        <span class="k">private</span> <span class="k">function</span> <span class="nf">save</span><span class="p">(</span><span class="nv">$filename</span><span class="p">){</span>
            <span class="nv">$type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
            <span class="nv">$temp</span> <span class="o">=</span> <span class="nb">pathinfo</span><span class="p">(</span><span class="nv">$filename</span><span class="p">,</span><span class="nx">PATHINFO_EXTENSION</span> <span class="p">);</span><span class="c1">//jpg</span>
            
            <span class="nv">$temp_arr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;jpeg&#39;</span><span class="p">,</span><span class="s1">&#39;jpg&#39;</span><span class="p">,</span><span class="s1">&#39;jpe&#39;</span><span class="p">,</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span><span class="s1">&#39;png&#39;</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$temp</span><span class="p">,</span> <span class="nv">$temp_arr</span><span class="p">)){</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">msg</span> <span class="o">=</span> <span class="s1">&#39;你给你文件名不合法!请用规定图片类型的文件名后缀&#39;</span><span class="p">;</span>
                <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">switch</span><span class="p">(</span><span class="nv">$temp</span><span class="p">){</span>
                <span class="k">case</span> <span class="s1">&#39;jpeg&#39;</span><span class="o">:</span>
                <span class="k">case</span> <span class="s1">&#39;jpe&#39;</span><span class="o">:</span>
                <span class="k">case</span> <span class="s1">&#39;jpg&#39;</span><span class="o">:</span>
                    <span class="nv">$type</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">&#39;gif&#39;</span><span class="o">:</span>
                    <span class="nv">$type</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">case</span> <span class="s1">&#39;png&#39;</span><span class="o">:</span>
                    <span class="nv">$type</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$fun</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">imgtypes</span><span class="p">[</span><span class="nv">$type</span><span class="p">];</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$fun</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">img</span><span class="p">,</span><span class="nv">$filename</span><span class="p">)){</span>
                <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">msg</span> <span class="o">=</span> <span class="s1">&#39;图片文件保存时出错!原因未知.&#39;</span><span class="p">;</span>
                <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>

<!--block_code_end-->
<p class="md_block">
    <span class="md_line">//调用实例</span>
</p>

<div class="codehilite code_lang_php  highlight"><pre><span></span>    <span class="c1">//注意每个方法参数较多,注意参考文档说明</span>
    <span class="c1">//创建对象</span>
    <span class="nv">$gd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyGD</span><span class="p">();</span>
   <span class="c1">//重置大小或生成缩图</span>
    <span class="c1">//echo $gd-&gt;resize(&#39;img/001.jpg&#39;,400,313,3,1);</span>
    <span class="c1">//文字水印</span>
    <span class="c1">//$gd-&gt;text_seal(&#39;img/001.jpg&#39;,&#39;这就是文字水印&#39;,2);</span>
    <span class="c1">//图片水印</span>
    <span class="c1">//$gd-&gt;img_seal(&#39;img/001.jpg&#39;,&#39;img/kpit.jpg&#39;,4,30);</span>
    <span class="c1">//旋转</span>
    <span class="c1">//echo $gd-&gt;rotate(&#39;img/001.jpg&#39;,30);</span>
    <span class="c1">//水平或垂直翻转图片</span>
    <span class="c1">//$gd-&gt;reverse(&#39;img/005.jpg&#39;,2);</span>
</pre></div>

<!--block_code_end--> </div>
                </div>
            </div>

        </div>

    </div>

</div>


<script type="text/javascript" src="./asset/gitbook/app.js"></script>

<script>require(["gitbook"], function (gitbook) {
    var config = {"fontSettings": {"theme": null, "family": "sans", "size": 2}};
    gitbook.start(config);
});

</script>





</body>

</html>